{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-879de8c0\"],{\"761c\":function(t,e,n){\"use strict\";n.d(e,\"b\",function(){return r}),n.d(e,\"a\",function(){return s}),n.d(e,\"d\",function(){return i}),n.d(e,\"e\",function(){return l}),n.d(e,\"c\",function(){return c}),n.d(e,\"f\",function(){return d}),n.d(e,\"g\",function(){return u});n(\"cadf\"),n(\"551c\"),n(\"097d\");var a=n(\"5bf4\"),o=n(\"4088\"),r=(\"\".concat(o[\"b\"],\"/upload\"),function(t){return Object(a[\"a\"])({url:\"/menuRoles/list\",headers:{token:localStorage.getItem(\"token\")},method:\"get\",params:t})}),s=function(t){return Object(a[\"a\"])({url:\"/adminRole/adminActionListByRoleId\",headers:{token:localStorage.getItem(\"token\")},method:\"get\",params:t})},i=function(t){return Object(a[\"a\"])({url:\"/admins/account\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},l=function(t){return Object(a[\"a\"])({url:\"/admins/loginByPwd\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},c=function(t){return Object(a[\"a\"])({url:\"/sms/send/sms\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},d=function(t){return Object(a[\"a\"])({url:\"/admins/updatePassword\",method:\"post\",data:t})},u=function(t,e){var n=new Date;n.setTime(t);var a=n.getFullYear(),o=n.getMonth()+1<10?\"0\"+(n.getMonth()+1):n.getMonth()+1,r=n.getDate()<10?\"0\"+n.getDate():n.getDate(),s=n.getHours()<10?\"0\"+n.getHours():n.getHours(),i=n.getMinutes()<10?\"0\"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?\"0\"+n.getSeconds():n.getSeconds();return\"1\"==e?a+\"年\"+o+\"月\"+r+\"日\":\"2\"==e?a+\"-\"+o+\"-\"+r:\"3\"==e?o+\"-\"+r:\"4\"==e?o:\"5\"==e?r:\"6\"==e?a+\".\"+o+\".\"+r+\" \"+s+\":\"+i+\":\"+l:\"7\"==e?a+\"-\"+o+\"-\"+r+\" \"+s+\":\"+i+\":\"+l:\"8\"==e?a+\"-\"+o+\"-\"+r+\" \"+s+\":\"+i:\"9\"==e?o+\"-\"+r+\" \"+s+\":\"+i:void 0}},\"8cd5\":function(t,e,n){\"use strict\";var a=n(\"b3fa\"),o=n.n(a);o.a},a27a:function(t,e,n){\"use strict\";n.d(e,\"e\",function(){return o}),n.d(e,\"g\",function(){return r}),n.d(e,\"a\",function(){return s}),n.d(e,\"i\",function(){return i}),n.d(e,\"f\",function(){return l}),n.d(e,\"d\",function(){return c}),n.d(e,\"c\",function(){return d}),n.d(e,\"b\",function(){return u}),n.d(e,\"h\",function(){return p});var a=n(\"5bf4\"),o=function(t){return Object(a[\"a\"])({url:\"/products/list\",method:\"get\",headers:{token:localStorage.getItem(\"token\")},params:t})},r=function(t){return Object(a[\"a\"])({url:\"/products/save\",method:\"post\",headers:{token:localStorage.getItem(\"token\")},data:JSON.stringify(t)})},s=function(t){return Object(a[\"a\"])({url:\"/products/delete\",method:\"DELETE\",headers:{token:localStorage.getItem(\"token\")},params:t})},i=function(t){return Object(a[\"a\"])({url:\"/products/putAway\",method:\"post\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",token:localStorage.getItem(\"token\")},data:t})},l=function(t){return Object(a[\"a\"])({url:\"/freights/list\",method:\"get\",params:t})},c=function(){return Object(a[\"a\"])({url:\"/productTypes/list\",method:\"get\"})},d=function(){return Object(a[\"a\"])({url:\"/paramGroups/list\",method:\"get\"})},u=function(t){return Object(a[\"a\"])({url:\"/products/info/\"+t,method:\"get\"})},p=function(t){return Object(a[\"a\"])({url:\"/products/update\",method:\"put\",data:JSON.stringify(t)})}},b3fa:function(t,e,n){},be5a:function(t,e,n){\"use strict\";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"div\",{staticClass:\"header\"},[n(\"p\",[t._v(\"产品列表\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.handleSecondDepShow}},[t._v(\"添加产品\")])],1),n(\"div\",{staticClass:\"filter\"},[n(\"el-form\",{staticClass:\"fl-l\",attrs:{inline:\"\"}},[n(\"el-form-item\",{attrs:{label:\"商品信息\"}},[n(\"el-col\",{attrs:{span:24}},[n(\"el-input\",{attrs:{placeholder:\"请输入商品名称和商品货号进行搜索\"},model:{value:t.form.search,callback:function(e){t.$set(t.form,\"search\",e)},expression:\"form.search\"}})],1)],1),n(\"el-form-item\",[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.getProdList}},[t._v(\"查找\")])],1),n(\"el-form-item\",[n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.changeshow}},[t._v(\"展开\")])],1),t.searchshow?n(\"div\",[n(\"el-form-item\",{attrs:{label:\"创建时间\"}},[n(\"el-date-picker\",{attrs:{type:\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:t.value1,callback:function(e){t.value1=e},expression:\"value1\"}})],1),n(\"el-form-item\",{attrs:{label:\"规格货号\"}},[n(\"el-col\",{attrs:{span:16}},[n(\"el-input\",{attrs:{placeholder:\"请输入规格货号\"},model:{value:t.form.productNumber,callback:function(e){t.$set(t.form,\"productNumber\",e)},expression:\"form.productNumber\"}})],1)],1),n(\"el-form-item\",{attrs:{label:\"商品分类\"}},[n(\"el-select\",{attrs:{clearable:\"\",placeholder:\"请选择\"},model:{value:t.form.typeId,callback:function(e){t.$set(t.form,\"typeId\",e)},expression:\"form.typeId\"}},[n(\"el-option\",{attrs:{value:1,label:\"电商\"}}),n(\"el-option\",{attrs:{value:0,label:\"app\"}})],1)],1),n(\"el-form-item\",{attrs:{label:\"库存区间:\"}},[n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最低\"},model:{value:t.form.minStore,callback:function(e){t.$set(t.form,\"minStore\",e)},expression:\"form.minStore\"}})],1),n(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[t._v(\"~\")]),n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最高\"},model:{value:t.form.maxStore,callback:function(e){t.$set(t.form,\"maxStore\",e)},expression:\"form.maxStore\"}})],1)],1),n(\"el-form-item\",{attrs:{label:\"价格区间:\"}},[n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最低\"},model:{value:t.form.minPrice,callback:function(e){t.$set(t.form,\"minPrice\",e)},expression:\"form.minPrice\"}})],1),n(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[t._v(\"~\")]),n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最高\"},model:{value:t.form.maxPrice,callback:function(e){t.$set(t.form,\"maxPrice\",e)},expression:\"form.maxPrice\"}})],1)],1),n(\"el-form-item\",{attrs:{label:\"销量区间:\"}},[n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最低\"},model:{value:t.form.minSales,callback:function(e){t.$set(t.form,\"minSales\",e)},expression:\"form.minSales\"}})],1),n(\"el-col\",{staticClass:\"line\",staticStyle:{\"text-align\":\"center\"},attrs:{span:2}},[t._v(\"~\")]),n(\"el-col\",{attrs:{span:8}},[n(\"el-input\",{attrs:{placeholder:\"区间最高\"},model:{value:t.form.maxSales,callback:function(e){t.$set(t.form,\"maxSales\",e)},expression:\"form.maxSales\"}})],1)],1)],1):t._e(),n(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},t._l(t.shoptypelist,function(e){return n(\"el-tag\",{key:e.val,class:{active:e.val==t.form.statusType},on:{click:function(n){t.changesearchtype(e.val)}}},[t._v(t._s(e.name)+t._s(\"\"!=e.nownum?e.nownum:\"0\"))])}))],1)],1),n(\"div\",{staticClass:\"table_body\"},[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData,border:\"\",size:\"medium \",\"default-sort\":{prop:\"price\",order:\"descending\"}},on:{\"sort-change\":t.changetable}},[n(\"el-table-column\",{attrs:{prop:\"departmentName\",label:\"商品\",\"min-width\":\"360\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"img\",{staticClass:\"prod-img\",attrs:{src:e.row.cover}}),n(\"div\",{staticClass:\"prod-detail\",attrs:{span:6}},[n(\"div\",[t._v(\"\\n                            \"+t._s(e.row.productName)+\"\\n                        \")]),n(\"div\",[t._v(\"\\n                            货号:\"+t._s(e.row.productNumber)+\"\\n                        \")]),n(\"div\",[t._v(\"\\n                            分类:\"+t._s(e.row.typeName)+\"\\n                        \")])])]}}])}),n(\"el-table-column\",{attrs:{prop:\"price\",label:\"价格\",sortable:\"custom\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"subordinateDepartment\",label:\"库存\",\"min-width\":\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"div\",[n(\"div\",[t._v(\"\\n                        总库存：\"+t._s(e.row.totalStock)+\"\\n                    \")]),n(\"div\",[t._v(\"\\n                        可用库存:\"+t._s(e.row.availableStock)+\"\\n                    \")])])]}}])}),n(\"el-table-column\",{attrs:{prop:\"subordinateDepartment\",label:\"销量\",sortable:\"custom\",\"min-width\":\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"div\",[n(\"div\",[t._v(\"\\n                        实际销量:\"+t._s(e.row.realSales)+\"\\n                    \")]),n(\"div\",[t._v(\"\\n                        基础销量:\"+t._s(e.row.sales)+\"\\n                    \")]),n(\"div\",[t._v(\"\\n                        流水销量:\"+t._s(e.row.flowSales)+\"\\n                    \")])])]}}])}),n(\"el-table-column\",{attrs:{prop:\"gmtCreate\",label:\"创建时间\",sortable:\"custom\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"sort\",label:\"排序\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",type:\"primary\",plain:\"\"},on:{click:function(n){t.handleCheck(e.$index,e.row)}}},[t._v(\"修改\")]),n(\"el-button\",{attrs:{size:\"mini\",type:\"danger\",plain:\"\"},on:{click:function(n){t.handleDel(e.$index,e.row)}}},[t._v(\"删除\")]),n(\"el-button\",{attrs:{size:\"mini\",type:\"primary\",plain:\"\"},on:{click:function(n){t.handleputAway(e.$index,e.row)}}},[t._v(t._s(\"0\"==e.row.status?\"下\":\"上\")+\"架\")])]}}])})],1),n(\"div\",{staticClass:\"table-footer--APP\",attrs:{slot:\"append\"},slot:\"append\"},[n(\"el-pagination\",{attrs:{\"current-page\":t.form.page,\"page-sizes\":[10,20,30,40,50,60,70,80,90],\"page-size\":t.form.limit,layout:\"total, sizes, prev, pager, next, jumper\",total:t.totalCount},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1)],1),n(\"div\",[n(\"el-dialog\",{attrs:{title:this.isEdit?\"修改产品\":\"新增产品\",\"append-to-body\":!0,visible:t.modalAddDepShow,width:\"40%\"},on:{\"update:visible\":function(e){t.modalAddDepShow=e}}},[t.modalAddDepShow?n(\"add-dep-modal\",{attrs:{\"dep-id\":t.depId},on:{\"finish-action\":t.getProdList,\"close-form\":function(e){t.modalAddDepShow=!1}}}):t._e()],1),n(\"el-dialog\",{attrs:{title:\"产品详情\",\"append-to-body\":!0,visible:t.secondDepShow,width:\"90%\"},on:{\"update:visible\":function(e){t.secondDepShow=e}}},[t.secondDepShow?n(\"second-index\",{attrs:{\"dep-id\":t.depId},on:{\"finish-action\":t.getProdList,\"close-form\":function(e){t.secondDepShow=!1}}}):t._e()],1)],1)])},o=[],r=n(\"c93e\"),s=n(\"a27a\"),i=n(\"761c\"),l=function(){return Promise.all([n.e(\"chunk-d5bdaefe\"),n.e(\"chunk-07f7e3c2\")]).then(n.bind(null,\"33290\"))},c={name:\"prodList\",data:function(){return{form:{current:1,size:10,productType:0,statusType:1,sortType:1},freightlist:[],value1:[,],shoptypelist:[{name:\"出售中\",val:\"1\",nownum:\"\"},{name:\"已下架\",val:\"2\",nownum:\"\"},{name:\"已售完\",val:\"3\",nownum:\"\"},{name:\"库存预警\",val:\"4\",nownum:\"\"}],shoptype:1,shopClassification:\"\",ommodityType:\"\",searchshow:!1,keyword:\"\",tableData:[],totalCount:0,tableLoading:!1,modalAddDepShow:!1,isEdit:!1,depId:0,secondDepShow:!1}},components:{SecondIndex:l},methods:{getProdList:function(){var t=this,e=Object(r[\"a\"])({},this.form);\"\"!=this.value1[0]&&void 0!=this.value1[0]&&null!=this.value1[0]&&(e.endTime=Object(i[\"g\"])(this.value1[1],2),e.startTime=Object(i[\"g\"])(this.value1[0],2)),this.tableLoading=!0,Object(s[\"e\"])(e).then(function(e){var n=e.data.data;if(null!=n){t.totalCount=n.page.total,t.tableData=n.page.records,t.tableLoading=!1;var a=n.count;t.shoptypelist[0].nownum=a.sellNum,t.shoptypelist[1].nownum=a.soldOutNum,t.shoptypelist[2].nownum=a.sellOutNum,t.shoptypelist[3].nownum=a.warningNum}else t.tableData=[],t.tableLoading=!1,t.totalCount=0}).catch(function(e){t.errorMsg(e),t.tableLoading=!1})},changesearchtype:function(t){this.form.statusType=t,this.getProdList()},changetable:function(t){\"price\"==t.prop&&\"ascending\"==t.order?this.form.sortType=1:\"price\"==t.prop&&\"descending\"==t.order&&(this.form.sortType=2),this.getProdList()},handleSizeChange:function(t){this.form.size=t,this.getProdList()},handleCurrentChange:function(t){this.form.current=t,this.getProdList()},handleAddDep:function(){this.depId=0,this.isEdit=!1,this.secondDepShow=!0},handleCheck:function(t,e){this.depId=e.pid,this.secondDepShow=!0,this.isEdit=!0},handleDel:function(t,e){var n=this,a=\"\"+e.pid,o={pids:a};Object(s[\"a\"])(o).then(function(t){var e=t.data,a=\"success\";200===e.code?n.getProdList():a=\"error\",n.$message({type:a,message:\"success\"===a?\"删除成功！\":e.message})})},handleputAway:function(t,e){var n=this,a=e.pid,o=0;0==e.status&&(o=-1);var r={pid:a,status:o};Object(s[\"i\"])(r).then(function(t){var e=t.data,a=\"success\";200===e.code?n.getProdList():a=\"error\",n.$message({type:a,message:\"success\"===a?\"操作成功！\":e.message})})},changeshow:function(){console.log(123),this.searchshow=!this.searchshow},handleSecondDepShow:function(){this.secondDepShow=!0,this.depId=0,this.isEdit=!1},errorMsg:function(t){this.$message({message:t,type:\"error\",duration:1500})}},created:function(){this.getProdList()}},d=c,u=(n(\"8cd5\"),n(\"2877\")),p=Object(u[\"a\"])(d,a,o,!1,null,\"2fabe041\",null);p.options.__file=\"prodList.vue\";e[\"default\"]=p.exports}}]);","extractedComments":[]}