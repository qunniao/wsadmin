{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-04a11898\"],{6259:function(t,e,n){\"use strict\";n.d(e,\"b\",function(){return a}),n.d(e,\"a\",function(){return i});var o=n(\"5bf4\"),a=function(t){return Object(o[\"a\"])({url:\"/storeVisitors/list\",method:\"get\",headers:{token:localStorage.getItem(\"token\")},params:t})},i=function(t){return Object(o[\"a\"])({url:\"/storeVisitors/info\",method:\"get\",headers:{token:localStorage.getItem(\"token\")},params:t})}},\"761c\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return i}),n.d(e,\"c\",function(){return r}),n.d(e,\"d\",function(){return s}),n.d(e,\"b\",function(){return l}),n.d(e,\"e\",function(){return c}),n.d(e,\"f\",function(){return u});var o=n(\"5bf4\"),a=n(\"4088\"),i=(\"\".concat(a[\"b\"],\"/upload\"),function(t){return Object(o[\"a\"])({url:\"/menuRoles/list\",headers:{token:localStorage.getItem(\"token\")},method:\"get\",params:t})}),r=function(t){return Object(o[\"a\"])({url:\"/admins/account\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},s=function(t){return Object(o[\"a\"])({url:\"/admins/loginByPwd\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},l=function(t){return Object(o[\"a\"])({url:\"/sms/send/sms\",method:\"post\",data:t,headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}})},c=function(t){return Object(o[\"a\"])({url:\"/admins/updatePassword\",method:\"post\",data:t})},u=function(t,e){var n=new Date;n.setTime(t);var o=n.getFullYear(),a=n.getMonth()+1<10?\"0\"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?\"0\"+n.getDate():n.getDate(),r=n.getHours()<10?\"0\"+n.getHours():n.getHours(),s=n.getMinutes()<10?\"0\"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?\"0\"+n.getSeconds():n.getSeconds();return\"1\"==e?o+\"年\"+a+\"月\"+i+\"日\":\"2\"==e?o+\"-\"+a+\"-\"+i:\"3\"==e?a+\"-\"+i:\"4\"==e?a:\"5\"==e?i:\"6\"==e?o+\".\"+a+\".\"+i+\" \"+r+\":\"+s+\":\"+l:\"7\"==e?o+\"-\"+a+\"-\"+i+\" \"+r+\":\"+s+\":\"+l:\"8\"==e?o+\"-\"+a+\"-\"+i+\" \"+r+\":\"+s:\"9\"==e?a+\"-\"+i+\" \"+r+\":\"+s:void 0}},\"96b5\":function(t,e,n){\"use strict\";var o=n(\"9f5b\"),a=n.n(o);a.a},\"9f5b\":function(t,e,n){},f655:function(t,e,n){\"use strict\";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"div\",{staticClass:\"header\"},[n(\"el-button\",{attrs:{type:\"primary\"}},[t._v(\"导出\")])],1),n(\"div\",{staticClass:\"filter\"},[n(\"el-form\",{staticClass:\"fl-l\",attrs:{inline:\"\"}})],1),n(\"div\",{staticClass:\"table_body\"},[n(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:t.tableData,border:\"\",size:\"medium \"}},[n(\"el-table-column\",{attrs:{prop:\"productName\",label:\"访客昵称\",\"min-width\":\"360\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"img\",{staticClass:\"prod-img\",attrs:{src:e.row.cover}}),n(\"div\",{staticClass:\"prod-detail\",attrs:{span:6}},[n(\"div\",[t._v(t._s(e.row.username))])])]}}])}),n(\"el-table-column\",{attrs:{prop:\"ip\",label:\"访问IP\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"region\",label:\"地区\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"num\",label:\"访问次数\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"orderType\",label:\"访问时间\",\"min-width\":\"180\"}}),n(\"el-table-column\",{attrs:{prop:\"gmtCreate\",label:\"最久访问小店\",\"min-width\":\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"div\",[t._v(t._s(t.timechange(e.row.gmtCreate,2)))])]}}])}),n(\"el-table-column\",{attrs:{prop:\"nickname\",label:\"小店归属\",\"min-width\":\"180\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"div\",[t._v(t._s(e.row.nickname))]),n(\"div\",[t._v(t._s(e.row.phone))])]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"300\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",type:\"primary\",plain:\"\"},on:{click:function(n){t.showVisitorsDetail(e.row.id,e.row.phone,e.row.nickname,e.row.storeName)}}},[t._v(\"访问记录\")])]}}])})],1),n(\"div\",{staticClass:\"table-footer--APP\",attrs:{slot:\"append\"},slot:\"append\"},[n(\"el-pagination\",{attrs:{\"current-page\":t.form.page,\"page-sizes\":[10,20,30,40,50,60,70,80,90],\"page-size\":t.form.limit,layout:\"total, sizes, prev, pager, next, jumper\",total:t.totalCount},on:{\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}})],1),n(\"el-dialog\",{attrs:{title:\"访客详情\",\"append-to-body\":!0,visible:t.secondDepShow,width:\"60%\"},on:{\"update:visible\":function(e){t.secondDepShow=e}}},[t.secondDepShow?n(\"visitors-detail\",{attrs:{\"visitors-id\":t.id,\"visitors-phone\":t.phone,\"visitors-nickname\":t.nickname,\"visitors-storename\":t.storeName},on:{\"close-form\":function(e){t.secondDepShow=!1}}}):t._e()],1)],1)])},a=[],i=n(\"c93e\"),r=n(\"761c\"),s=n(\"6259\"),l=function(){return n.e(\"chunk-7bb03300\").then(n.bind(null,\"35d3\"))},c={name:\"prodList\",data:function(){return{form:{size:10,current:1},value1:[,],id:\"\",ip:\"\",phone:\"\",nickname:\"\",storeName:\"\",tableData:[],totalCount:0,tableLoading:!1,secondDepShow:!1}},components:{VisitorsDetail:l},methods:{timechange:function(t,e){return Object(r[\"f\"])(t,e)},handleSizeChange:function(t){this.form.size=t,this.getVisitorsRecordList()},handleCurrentChange:function(t){this.form.current=t,this.getVisitorsRecordList()},showVisitorsDetail:function(t,e,n,o){this.id=t,this.phone=e,this.nickname=n,this.storeName=o,this.secondDepShow=!0},getVisitorsRecordList:function(){var t=this,e=Object(i[\"a\"])({},this.form);\"\"!=this.value1[0]&&void 0!=this.value1[0]&&null!=this.value1[0]&&(e.endTime=Object(r[\"f\"])(this.value1[1],2),e.startTime=Object(r[\"f\"])(this.value1[0],2)),this.tableLoading=!0,Object(s[\"b\"])(e).then(function(e){var n=e.data.data;console.log(n.records),t.totalCount=n.total,t.tableData=n.records,t.tableLoading=!1}).catch(function(e){t.tableLoading=!1})}},created:function(){this.getVisitorsRecordList()}},u=c,d=(n(\"96b5\"),n(\"2877\")),p=Object(d[\"a\"])(u,o,a,!1,null,\"6cfe4c20\",null);p.options.__file=\"visitorsRecordIndex.vue\";e[\"default\"]=p.exports}}]);","extractedComments":[]}