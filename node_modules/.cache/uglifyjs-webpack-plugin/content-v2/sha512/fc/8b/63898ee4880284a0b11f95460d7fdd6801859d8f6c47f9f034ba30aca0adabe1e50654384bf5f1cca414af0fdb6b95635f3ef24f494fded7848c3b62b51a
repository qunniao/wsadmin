{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-8593f90a\"],{\"11e9\":function(e,t,a){var r=a(\"52a7\"),o=a(\"4630\"),n=a(\"6821\"),c=a(\"6a99\"),s=a(\"69a8\"),i=a(\"c69a\"),l=Object.getOwnPropertyDescriptor;t.f=a(\"9e1e\")?l:function(e,t){if(e=n(e),t=c(t,!0),i)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},\"49cd\":function(e,t,a){\"use strict\";var r=a(\"6741\"),o=a.n(r);o.a},\"5dbc\":function(e,t,a){var r=a(\"d3f4\"),o=a(\"8b97\").set;e.exports=function(e,t,a){var n,c=t.constructor;return c!==a&&\"function\"==typeof c&&(n=c.prototype)!==a.prototype&&r(n)&&o&&o(e,n),e}},6741:function(e,t,a){},\"8b97\":function(e,t,a){var r=a(\"d3f4\"),o=a(\"cb7c\"),n=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+\": can't set as prototype!\")};e.exports={set:Object.setPrototypeOf||(\"__proto__\"in{}?function(e,t,r){try{r=a(\"9b43\")(Function.call,a(\"11e9\").f(Object.prototype,\"__proto__\").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return n(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:n}},9093:function(e,t,a){var r=a(\"ce10\"),o=a(\"e11e\").concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},a545:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"mod-prod-info\"},[a(\"el-form\",{ref:\"dataForm\",attrs:{model:e.dataForm,rules:e.rules,\"label-width\":\"150px\"}},[a(\"el-form-item\",{attrs:{label:\"商品信息:\"}},[a(\"img\",{staticClass:\"prod-img\",attrs:{src:e.cover}}),a(\"div\",{staticClass:\"prod-detail\",attrs:{span:6}},[a(\"div\",[e._v(e._s(e.prodName))]),a(\"div\",[e._v(\"分类：\")]),a(\"div\",[e._v(\"规格：\")])])]),a(\"el-form-item\",{attrs:{label:\"增减方式：\"}},[a(\"el-radio\",{attrs:{label:\"1\"},model:{value:e.changshowtype,callback:function(t){e.changshowtype=t},expression:\"changshowtype\"}},[e._v(\"按规格调整\")]),a(\"el-radio\",{attrs:{label:\"2\"},model:{value:e.changshowtype,callback:function(t){e.changshowtype=t},expression:\"changshowtype\"}},[e._v(\"统一调整\")])],1),a(\"el-form-item\",{staticStyle:{\"margin-top\":\"10px\"},attrs:{label:\"增减方式：\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.dataForm.changeType,callback:function(t){e.$set(e.dataForm,\"changeType\",t)},expression:\"dataForm.changeType\"}},e._l(e.Stocktype,function(e){return a(\"el-option\",{key:e.val,attrs:{label:e.title,value:e.val}})}))],1),1==e.changshowtype?a(\"div\",e._l(e.skuStockList,function(t,r){return a(\"el-form-item\",{key:r,attrs:{label:t.sp1+t.sp2}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-input\",{directives:[{name:\"enter-number\",rawName:\"v-enter-number\"}],attrs:{placeholder:\"请输入\",type:\"number\"},model:{value:t.value,callback:function(a){e.$set(t,\"value\",a)},expression:\"item.value\"}},[e._v(\"\\n                    >\")])],1),a(\"div\",[e._v(\"可用库存:\"+e._s(t.availableStock))])],1)})):e._e(),2==e.changshowtype?a(\"div\",[a(\"el-form-item\",{attrs:{label:\"调整数量:\",prop:\"allchangenum\"}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-input\",{directives:[{name:\"enter-number\",rawName:\"v-enter-number\"}],attrs:{placeholder:\"请输入\",type:\"number\"},model:{value:e.dataForm.allchangenum,callback:function(t){e.$set(e.dataForm,\"allchangenum\",t)},expression:\"dataForm.allchangenum\"}},[e._v(\"\\n                    >\")])],1)],1)],1):e._e(),a(\"el-form-item\",[a(\"el-input\",{attrs:{type:\"textarea\",autosize:{minRows:2,maxRows:4},placeholder:\"请填写备注信息\"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,\"remark\",t)},expression:\"dataForm.remark\"}})],1),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dataFormSubmit()}}},[e._v(\"确定\")])],1)],1)],1)},o=[],n=(a(\"c5f6\"),a(\"8dfa\")),c={name:\"editor\",data:function(){var e=this,t=function(t,a,r){Number(e.dataForm.allchangenum)>Number(e.allnum)&&2==e.dataForm.changeType&&2==e.changshowtype?r(new Error(\"调整数目不能大于库存\")):r()};return{Stocktype:[{val:1,title:\"增加库存\"},{val:2,title:\"减少库存\"}],prodName:\"\",changshowtype:\"1\",cover:\"\",allnum:\"\",rules:{allchangenum:[{required:!0,message:\"不能为空\",trigger:[\"blur\",\"change\"]},{required:!0,trigger:\"blur\",validator:t}]},skuStockList:[],skuId:\"\",dataForm:{allchangenum:\"\",pid:\"\",changeType:1,userType:1,operatorId:1,remark:\"\"}}},components:{},props:{prodId:{required:!0}},computed:{defalutSku:function(){return this.$store.state.prod.defalutSku}},methods:{dataFormSubmit:function(){var e=this;this.$refs[\"dataForm\"].validate(function(t){if(t){var a=e.dataForm,r={pid:a.pid,changeType:a.changeType,remark:a.remark,userType:1,operatorId:1,skuStockDtos:[]};console.log(e.allnum);for(var o=0;o<e.skuStockList.length;o++)r.skuStockDtos.push({skuId:e.skuStockList[o].skuId,num:Number(e.skuStockList[o].value)});if(2==e.changshowtype)for(var c=0;c<r.skuStockDtos.length;c++)r.skuStockDtos.num=a.allchangenum;console.log(r),Object(n[\"b\"])(r).then(function(t){var a=t.data;200==a.code?(e.$message({type:\"success\",message:\"修改库存成功\"}),e.$emit(\"close-form\"),e.$emit(\"finish-action\")):e.errorMsg(a.message)}).catch(function(t){e.tableLoading=!1})}})},getProdDetail:function(e){var t=this,a={current:1,size:10,pid:e};Object(n[\"d\"])(a).then(function(e){var a=e.data.data;t.prodName=a.product_name,t.cover=a.cover,t.allnum=a.available_stock;for(var r=a.skuStock.records,o=0;o<r.length;o++)r[o].value=\"\";t.skuStockList=r}).catch(function(e){t.tableLoading=!1})},errorMsg:function(e){this.$message({message:e,type:\"error\",duration:1500})},backhtmls:function(){this.$emit(\"close-form\")}},mounted:function(){this.dataForm.pid=this.prodId,this.getProdDetail(this.prodId),this.allnum=this.prodNum}},s=c,i=(a(\"49cd\"),a(\"2877\")),l=Object(i[\"a\"])(s,r,o,!1,null,\"2518d2ba\",null);l.options.__file=\"prodStockInfoTwo.vue\";t[\"default\"]=l.exports},aa77:function(e,t,a){var r=a(\"5ca1\"),o=a(\"be13\"),n=a(\"79e5\"),c=a(\"fdef\"),s=\"[\"+c+\"]\",i=\"​\",l=RegExp(\"^\"+s+s+\"*\"),u=RegExp(s+s+\"*$\"),p=function(e,t,a){var o={},s=n(function(){return!!c[e]()||i[e]()!=i}),l=o[e]=s?t(d):c[e];a&&(o[a]=l),r(r.P+r.F*s,\"String\",o)},d=p.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(l,\"\")),2&t&&(e=e.replace(u,\"\")),e};e.exports=p},c5f6:function(e,t,a){\"use strict\";var r=a(\"7726\"),o=a(\"69a8\"),n=a(\"2d95\"),c=a(\"5dbc\"),s=a(\"6a99\"),i=a(\"79e5\"),l=a(\"9093\").f,u=a(\"11e9\").f,p=a(\"86cc\").f,d=a(\"aa77\").trim,m=\"Number\",f=r[m],h=f,v=f.prototype,g=n(a(\"2aeb\")(v))==m,b=\"trim\"in String.prototype,k=function(e){var t=s(e,!1);if(\"string\"==typeof t&&t.length>2){t=b?t.trim():d(t,3);var a,r,o,n=t.charCodeAt(0);if(43===n||45===n){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var c,i=t.slice(2),l=0,u=i.length;l<u;l++)if(c=i.charCodeAt(l),c<48||c>o)return NaN;return parseInt(i,r)}}return+t};if(!f(\" 0o1\")||!f(\"0b1\")||f(\"+0x1\")){f=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof f&&(g?i(function(){v.valueOf.call(a)}):n(a)!=m)?c(new h(k(t)),a,f):k(t)};for(var y,_=a(\"9e1e\")?l(h):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger\".split(\",\"),w=0;_.length>w;w++)o(h,y=_[w])&&!o(f,y)&&p(f,y,u(h,y));f.prototype=v,v.constructor=f,a(\"2aba\")(r,m,f)}},fdef:function(e,t){e.exports=\"\\t\\n\\v\\f\\r   ᠎             　\\u2028\\u2029\\ufeff\"}}]);","extractedComments":[]}