{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\LoginPageByPwd.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\LoginPageByPwd.vue","mtime":1577002927621},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\HtmlProjects\\\\wsadmin\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapMutations, mapState, mapActions } from 'vuex';\nimport { BASE_URL } from '@/public/constant';\nimport { loginByPwdAPI, getCodeAPI } from '@/api/globalAPI';\nexport default {\n  name: 'HelloWorld',\n  data: function data() {\n    return {\n      codeImg: null,\n      formLogin: {\n        phone: '',\n        password: ''\n      },\n      count: \"\",\n      timer: null,\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    /**\n     * 提交登陆操作\n     */\n    submitLoginForm: function submitLoginForm() {\n      var _this = this;\n\n      var formLogin = _objectSpread({}, this.formLogin);\n\n      this.$refs.formLogin.validate(function (valid) {\n        if (valid) {\n          loginByPwdAPI(formLogin).then(function (res) {\n            var _res$data = res.data,\n                code = _res$data.code,\n                data = _res$data.data,\n                message = _res$data.message;\n            console.log(res.data);\n            console.log(code);\n\n            if (code === 200) {\n              var millisecond = new Date().getTime();\n              var expiresTime = new Date(millisecond + 60 * 60 * 1000); // console.log(expiresTime)\n              // Cookies.set('token', 'value', {\n              //     expires: expiresTime,\n              // });\n              // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n\n              localStorage.setItem('token', data.token); // localStorage.setItem('tokendate',expiresTime)\n\n              console.log(data);\n              sessionStorage.setItem('token', data.admin.token);\n              sessionStorage.setItem('roleId', data.admin.adminRoleId);\n              sessionStorage.setItem('uid', data.admin.uid); // localStorage.setItem('rid', data.tid)\n              // localStorage.setItem('username', formLogin.username)\n\n              _this.$message({\n                type: 'success',\n                message: '登陆成功！'\n              }); // 改变登录状态为已登录\n\n\n              _this.$store.commit('moduleLogin/login'); // 跳转到应用\n\n\n              _this.$router.push('/');\n            } else {\n              _this.$message({\n                type: 'error',\n                message: message\n              });\n            }\n          });\n        }\n      });\n    },\n    getcode: function getcode() {\n      var _this2 = this;\n\n      var that = this;\n\n      if (!this.timer) {\n        if (!/^1[3456789]\\d{9}$/.test(this.formLogin.phone)) {\n          this.$message({\n            type: 'error',\n            message: '请输入正确的手机号码'\n          });\n          return false;\n        } else {\n          var pushdata = {\n            phone: this.formLogin.phone\n          };\n          var TIME_COUNT = 60;\n\n          if (!this.time) {\n            this.count = TIME_COUNT;\n            this.timer = setInterval(function () {\n              if (_this2.count > 0 && _this2.count <= TIME_COUNT) {\n                _this2.count--;\n              } else {\n                _this2.show = true;\n                clearInterval(_this2.timer);\n                _this2.timer = null;\n              }\n            }, 1000);\n          }\n\n          getCodeAPI(pushdata).then(function (res) {\n            var response = res.data;\n\n            if (response.code == 200) {\n              _this2.$message({\n                type: 'success',\n                message: '获取验证码成功'\n              });\n            }\n          }).catch(function (err) {\n            console.log(err);\n            _this2.tableLoading = false;\n          });\n        }\n      }\n    },\n    errorMsg: function errorMsg(message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["LoginPageByPwd.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 登陆页面 -->\n<template>\n    <div class=\"child-vhc wrapper--login\">\n        <div class=\"form--login\">\n            <el-form ref=\"formLogin\" :model=\"formLogin\" :rules=\"rules\">\n                <div class=\"loginheader\">微商后台管理系统</div>\n                <el-form-item prop=\"phone\">\n                    <el-input placeholder=\"请输入手机号\" v-model=\"formLogin.phone\"></el-input>\n                </el-form-item>\n                <el-form-item prop=\"password \">\n                    <el-input placeholder=\"请输入密码\" type=\"password\" v-model=\"formLogin.password\"></el-input>\n                </el-form-item> \n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"submitLoginForm\">提交</el-button>\n                </el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapMutations, mapState, mapActions} from 'vuex'\n\nimport {BASE_URL} from '@/public/constant'\nimport {loginByPwdAPI,getCodeAPI} from '@/api/globalAPI'\n\nexport default {\n    name: 'HelloWorld',\n    data() {\n        return {\n            codeImg: null,\n            formLogin: {\n                phone: '',\n                password: '',\n             \n            },\n            count:\"\",\n            timer:null,\n            rules: {\n                username: [\n                    {\n                        required: true,\n                        message: '请输入用户名',\n                        trigger: 'blur'\n                    }\n                ],\n                password: [\n                    {\n                        required: true,\n                        message: '请输入密码',\n                        trigger: 'blur'\n                    }\n                ],\n               \n            },\n        };\n    },\n    methods: {\n\n        /**\n         * 提交登陆操作\n         */\n        submitLoginForm() {\n            const formLogin = {\n                ...this.formLogin\n            }\n            this.$refs.formLogin.validate(valid => {\n                if (valid) {\n                    loginByPwdAPI (formLogin).then(res => {\n                        const {code, data, message} = res.data\n                        console.log(res.data)\n                        console.log(code)\n                        if (code === 200) {\n                            var millisecond = new Date().getTime();\n                            var expiresTime = new Date(millisecond +60*60 * 1000);\n                            // console.log(expiresTime)\n                            // Cookies.set('token', 'value', {\n                            //     expires: expiresTime,\n                            // });\n                            // document.cookie = \"token=\"+  data.token + \";expires=\" + expiresTime.toGMTString();\n                            localStorage.setItem('token', data.token)\n                            // localStorage.setItem('tokendate',expiresTime)\n                            console.log(data)\n                            sessionStorage.setItem('token', data.admin.token)\n                            sessionStorage.setItem('roleId', data.admin.adminRoleId)\n                            sessionStorage.setItem('uid', data.admin.uid)\n                            // localStorage.setItem('rid', data.tid)\n                            // localStorage.setItem('username', formLogin.username)\n\n                            this.$message({type: 'success', message: '登陆成功！'})\n                            // 改变登录状态为已登录\n                            this\n                                .$store\n                                .commit('moduleLogin/login')\n                            // 跳转到应用\n                            this\n                                .$router\n                                .push('/')\n                        } else {\n                            this.$message({type: 'error', message: message})\n                        }\n                    })\n                }\n            })\n           \n        },\n        getcode(){\n            const that =this\n            if(!this.timer){\n                 if(!(/^1[3456789]\\d{9}$/.test(this.formLogin.phone))){ \n                    this.$message({type: 'error', message: '请输入正确的手机号码'}) \n                    return false; \n            }else{\n                const pushdata={\n                    phone:this.formLogin.phone\n                }\n                const TIME_COUNT = 60;\n                 if (!this.time) {\n                        this.count = TIME_COUNT;\n                        this.timer = setInterval(() => {\n                        if (this.count > 0 && this.count <= TIME_COUNT) {\n                            this.count--;\n                            } else {\n                            this.show = true;\n                            clearInterval(this.timer);\n                            this.timer = null;\n                            }\n                        }, 1000)\n                    }\n                    getCodeAPI(pushdata)\n                    .then(res => {\n                            const response = res.data;\n                            if(response.code==200){\n                                this.$message({\n                                    type: 'success',\n                                    message: '获取验证码成功',\n                                });\n                            }\n                        })\n                        .catch(err => {\n                        console.log(err)\n                            this.tableLoading = false;\n                        }) \n                }\n            }\n        },\n        errorMsg (message) {\n            this.$message({\n                message: message,\n                type: 'error',\n                duration: 1500\n            })\n        },\n    },\n    mounted() {\n    }\n}\n</script>\n\n<style scoped=\"scoped\" lang=\"less\">\n    .wrapper--login {\n        width: 100%;\n        min-height: 500px;\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        background: url(\"../assets/images/bg.jpg\") center no-repeat;\n        background-size: cover;\n    }\n    .form--login {\n        width: 400px;\n        min-height: 200px;\n        padding: 30px 20px;\n        background: rgba(0, 0, 0, 0.6);\n        border-radius: 6px;\n    }\n    .captcha--wrapper {\n        height: 40px;\n\n        img {\n            height: 100%;\n            background: #fff;\n        }\n    }\n    .loginheader{\n        font-size: 30px;\n        text-align: center;\n        margin: 10px auto;\n        color: #fff;\n    }\n</style>"],"sourceRoot":"src\\components"}]}