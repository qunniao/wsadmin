{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js!E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\HtmlProjects\\wsadmin\\src\\public\\http.js","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\public\\http.js","mtime":1572690196799},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport _objectSpread from \"E:\\\\HtmlProjects\\\\wsadmin\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/objectSpread\";\nimport axios from 'axios';\nimport Qs from 'qs';\nimport Vue from 'vue';\nimport router from '@/router';\nimport { Message } from 'element-ui';\nimport { BASE_URL } from './constant';\nVue.prototype.$message = Message;\n/**\n * axios 请求封装\n * @param {Object} config axios 配置\n * @param {Boolean} isFormData 是否为FormData，true 不设置请求头\n */\n\nvar http = function http(config) {\n  var isFormData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var headers = {};\n  headers['Authorization'] = \"\".concat(localStorage.getItem('token'));\n\n  if (!isFormData) {\n    headers['Content-Type'] = 'application/json';\n  }\n\n  if (config.headers) {\n    headers = _objectSpread({}, headers, config.headers);\n  }\n\n  var data = null; // Content-Type 为 application/x-www-form-urlencoded 并且 data 类型不为 formData 时序列化 data\n\n  if (Object.prototype.toString.call(config.data) !== '[object FormData]') {\n    data = !headers['Content-Type'] || headers['Content-Type'] === 'application/x-www-form-urlencoded' ? Qs.stringify(config.data) : config.data || '';\n  } else {\n    data = config.data;\n  }\n\n  var newRequest = new Promise(function (resolve, reject) {\n    axios(Object.assign({}, config, {\n      baseURL: BASE_URL,\n      url: config.url,\n      method: config.method || 'get',\n      headers: headers,\n      data: data,\n      params: config.params || '',\n      timeout: config.timeout || 0 // withCredentials: true,\n\n    })).then(function (response) {\n      if (response.data.code === 41000 || response.data.code == 41001 || response.data.code == 41002) {\n        Vue.prototype.$message({\n          type: 'error',\n          message: '登录信息过期！请重新登录'\n        });\n        reject('登录信息过期！请重新登录');\n        router.push('/login');\n      } else {\n        resolve(response);\n      }\n    }).catch(function (error) {\n      console.log(error);\n      reject(error);\n    });\n  });\n  return newRequest;\n};\n\nexport default http;",null]}