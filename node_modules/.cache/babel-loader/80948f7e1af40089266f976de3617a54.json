{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\adminRole\\adminRoleSetPower.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\adminRole\\adminRoleSetPower.vue","mtime":1576992693510},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport actionItem from './actionItem';\nimport { getAdminActionListAPI, getAdminRolePowerListAPI } from '@/api/adminRoleApi.js';\nimport { updateAdminRolePowerAPI } from '@/api/adminRoleApi.js';\nexport default {\n  name: 'editor',\n  data: function data() {\n    return {\n      // 规格列表\n      dataForm: {},\n      checkList: [],\n      actionIds: [],\n      actionList: [],\n      powerList: []\n    };\n  },\n  components: {\n    actionItem: actionItem\n  },\n  props: {\n    roleId: {\n      required: true\n    }\n  },\n  methods: {\n    //获取子组件的值\n    showMessageFromChild: function showMessageFromChild(data) {\n      console.log(\"data:\" + data);\n      this.checkList = data;\n    },\n    dataFormSubmit: function dataFormSubmit() {\n      var _this = this;\n\n      console.log(\"roleId:\" + this.roleId);\n      console.log(this.checkList);\n      this.$refs['dataForm'].validate(function (valid) {\n        var ids = '';\n\n        for (var i = 0; i < _this.checkList.length; i++) {\n          ids += _this.checkList[i] + \",\";\n        }\n\n        console.log(ids);\n\n        if (valid) {\n          var params = {\n            roleId: _this.roleId,\n            ids: ids\n          };\n          updateAdminRolePowerAPI(params).then(function (res) {\n            var sucresponse = res.data;\n\n            if (sucresponse.code == 200) {\n              _this.$message({\n                type: 'success',\n                message: '设置成功'\n              });\n\n              _this.$emit('close-form');\n\n              _this.$emit('finish-action');\n            } else {\n              _this.errorMsg(sucresponse.message);\n            }\n          }).catch(function (err) {\n            console.log(err);\n          });\n          console.log(params);\n        }\n      });\n    },\n    getAdminActionList: function getAdminActionList() {\n      var _this2 = this;\n\n      console.log(\"getAdminActionList\");\n      var params = {\n        roleId: this.roleId\n      };\n      getAdminActionListAPI(params).then(function (res) {\n        console.log(\"getAdminActionListAPI 返回\");\n        var data = res.data.data.actionList;\n        var powerList = res.data.data.powerList;\n        var checkArray = [];\n\n        for (var i = 0; i < powerList.length; i++) {\n          checkArray.push(powerList[i].actionId);\n        }\n\n        _this2.checkList = checkArray;\n        _this2.actionList = data;\n        console.log(_this2.actionList);\n        console.log(_this2.checkList);\n      }).catch(function (err) {});\n    },\n    errorMsg: function errorMsg(message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      });\n    },\n\n    /*\n      * 返回上层\n      */\n    backhtmls: function backhtmls() {\n      this.$emit('close-form');\n    }\n  },\n  mounted: function mounted() {\n    console.log(\"mounted方法\");\n    this.getAdminActionList();\n  }\n};",{"version":3,"sources":["adminRoleSetPower.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"mod-prod-info\">\n      <el-form :model=\"dataForm\"\n             ref=\"dataForm\"\n             label-width=\"150px\">\n    \n            <el-form-item label-width=\"180px\" label=\"选择权限：\" prop=\"actionList\">\n             <template>\n                <el-menu \n                :unique-opened=\"true\">\n                  \n                    <action-item :key=\"item.actionId\" v-for=\"item in actionList\" :menuItem=\"item\"  :menuIndex=\"item.actionId\" :checkList=\"checkList\" v-on:listenTochildEvent=\"showMessageFromChild\"></action-item>\n                </el-menu>\n            </template>\n            </el-form-item>\n     \n      <el-form-item>\n        <el-button type=\"primary\"\n                   @click=\"dataFormSubmit()\">确定</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport actionItem from'./actionItem';\n\nimport {\n  getAdminActionListAPI,getAdminRolePowerListAPI\n} from '@/api/adminRoleApi.js'\n\nimport {\n  updateAdminRolePowerAPI\n} from '@/api/adminRoleApi.js'\n\nexport default {\n   name:'editor',\n  data () {\n    return {\n      // 规格列表\n      dataForm:{\n\n      },\n      checkList:[],\n      actionIds:[],\n      actionList:[],\n      powerList:[]\n    }\n  },\n  components: {\n        actionItem\n  },\n  props: {\n    roleId: {\n      required: true,\n    },\n  },\n \n  methods: {\n    //获取子组件的值\n    showMessageFromChild(data){\n          console.log(\"data:\"+data);\n          this.checkList = data;\n    },\n\n    dataFormSubmit () {\n      console.log(\"roleId:\"+this.roleId);\n      console.log(this.checkList);\n        this.$refs['dataForm'].validate((valid) => {\n          var ids = '';\n          for(let i=0;i<this.checkList.length;i++){\n            ids+=this.checkList[i]+\",\";\n          }\n      console.log(ids);\n          if(valid){\n            const params = {\n              roleId:this.roleId,\n              ids:ids\n            }\n           \n              updateAdminRolePowerAPI(params).then(res => {\n                    const sucresponse = res.data;\n                    if(sucresponse.code==200){\n                      this.$message({\n                        type: 'success',\n                        message: '设置成功',\n                      });\n                      this.$emit('close-form')\n                      this.$emit('finish-action')\n                    }else{\n                      this.errorMsg(sucresponse.message)\n                    }\n                })\n                .catch(err => {\n                  console.log(err)\n                   \n                })\n           \n\n            console.log(params)\n          }\n        })\n    },\n   getAdminActionList(){\n      console.log(\"getAdminActionList\");\n      const params = {\n              roleId:this.roleId\n            }\n            getAdminActionListAPI(params)\n                .then(res => {\n                  console.log(\"getAdminActionListAPI 返回\")\n                    const data = res.data.data.actionList;\n                    const powerList = res.data.data.powerList;\n                    var checkArray = [];\n                    for(var i=0;i<powerList.length;i++){\n                      checkArray.push(powerList[i].actionId);\n                    }\n                    this.checkList = checkArray;\n                    this.actionList = data;\n                  \n                    console.log(this.actionList)\n                    console.log(this.checkList)\n                })\n                .catch(err => {\n                    \n                })\n    },\n\n  \n    \n    errorMsg (message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      })\n    },\n    /*\n      * 返回上层\n      */\n    backhtmls(){\n        this.$emit('close-form')\n    }\n   \n  },\n\n   mounted() {\n      console.log(\"mounted方法\");\n      this.getAdminActionList();  \n    },  \n  \n}\n\n</script>\n<style scoped=\"scoped\" lang=\"less\">\n.mbline{\n  margin-top:24px;\n  padding-left: 20px;\n  line-height: 40px;\n  background: rgb(249, 249, 249);\n}\n.avatar{\n  width: 100px;\n  height: 100px;\n}\n</style>"],"sourceRoot":"src\\components\\adminRole"}]}