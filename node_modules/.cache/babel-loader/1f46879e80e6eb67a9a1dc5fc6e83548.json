{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\allOrderManage\\allOrderInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\allOrderManage\\allOrderInfo.vue","mtime":1575020125987},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport JsPDF from 'jspdf';\nimport { timeStamp2String } from '@/api/globalAPI.js';\nimport { getOrderDetailAPI } from '@/api/prodOrderAPI.js';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      form: {\n        size: 10,\n        current: 1,\n        id: ''\n      },\n      infotext: '',\n      htmlTitle: '订单信息',\n      orderstate: {\n        \"-1\": \"已删除\",\n        0: \"已关闭\",\n        1: \"待确认\",\n        2: \"待付款\",\n        3: \"待总部处理\",\n        4: \"待发货\",\n        5: \"待收货\",\n        6: \"待评价\",\n        7: \"已完成\"\n      },\n      paywaylist: {\n        1: \"打款凭证\",\n        2: \"线上支付\"\n      },\n      sendway: {\n        1: \"快递\",\n        2: \"自提\",\n        3: \"无需物流\"\n      },\n      orderdetail: {},\n      orderform: []\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    orderId: {\n      required: true\n    }\n  },\n  methods: {\n    /**\r\n     * @msg: 时间处理\r\n     * @param {type} \r\n     * @return: \r\n     */\n    timechange: function timechange(time, type) {\n      return timeStamp2String(time, type);\n    },\n\n    /*\r\n     * 获取订单详情\r\n     */\n    getOrderDetail: function getOrderDetail(id) {\n      var _this = this;\n\n      this.tableLoading = true;\n      getOrderDetailAPI(id).then(function (res) {\n        var orderdata = res.data.data;\n        _this.orderdetail = orderdata;\n        _this.orderform = orderdata.orderProductBackList;\n      }).catch(function (err) {\n        _this.tableLoading = false;\n      });\n    },\n    printOut: function printOut(name) {\n      var shareContent = document.body,\n          //需要截图的包裹的（原生的）DOM 对象\n      width = shareContent.clientWidth,\n          //获取dom 宽度\n      height = shareContent.clientHeight,\n          //获取dom 高度\n      canvas = document.createElement(\"canvas\"),\n          //创建一个canvas节点\n      scale = 2; //定义任意放大倍数 支持小数\n\n      canvas.width = width * scale; //定义canvas 宽度 * 缩放\n\n      canvas.height = height * scale; //定义canvas高度 *缩放\n\n      canvas.style.width = shareContent.clientWidth * scale + \"px\";\n      canvas.style.height = shareContent.clientHeight * scale + \"px\";\n      canvas.getContext(\"2d\").scale(scale, scale); //获取context,设置scale\n\n      var opts = {\n        scale: scale,\n        // 添加的scale 参数\n        canvas: canvas,\n        //自定义 canvas\n        logging: false,\n        //日志开关，便于查看html2canvas的内部执行流程\n        width: width,\n        //dom 原始宽度\n        height: height,\n        useCORS: true // 【重要】开启跨域配置\n\n      };\n      html2Canvas(shareContent, opts).then(function () {\n        var contentWidth = canvas.width;\n        var contentHeight = canvas.height; //一页pdf显示html页面生成的canvas高度;\n\n        var pageHeight = contentWidth / 592.28 * 841.89; //未生成pdf的html页面高度\n\n        var leftHeight = contentHeight; //页面偏移\n\n        var position = 0; //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高\n\n        var imgWidth = 595.28;\n        var imgHeight = 592.28 / contentWidth * contentHeight;\n        var pageData = canvas.toDataURL(\"image/jpeg\", 1.0);\n        var PDF = new JsPDF(\"\", \"pt\", \"a4\");\n\n        if (leftHeight < pageHeight) {\n          PDF.addImage(pageData, \"JPEG\", 0, 0, imgWidth, imgHeight);\n        } else {\n          while (leftHeight > 0) {\n            PDF.addImage(pageData, \"JPEG\", 0, position, imgWidth, imgHeight);\n            leftHeight -= pageHeight;\n            position -= 841.89;\n\n            if (leftHeight > 0) {\n              PDF.addPage();\n            }\n          }\n        }\n\n        PDF.save(name + \".pdf\"); // 这里是导出的文件名\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getOrderDetail(this.orderId);\n  }\n};",{"version":3,"sources":["allOrderInfo.vue"],"names":[],"mappings":"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","sourcesContent":["/*\r\n * @Description: 订单详情\r\n * @Author: jian.weng\r\n * @Date: 2019-10-29 10:49:29\r\n */\r\n\r\n<template>\r\n    <div>\r\n        <el-button @click=\"getPdf()\" type=\"primary\">导出</el-button>\r\n        <el-button type=\"primary\" v-print=\"'#pdfDom'\">打印</el-button>\r\n        <div id=\"pdfDom\" class=\"table_body\">\r\n            <el-row>\r\n                    <el-col :span=\"16\">\r\n                        <div>订单号:{{orderdetail.orderNumber}}</div>\r\n                        <div>{{orderstate[orderdetail.orderState]}}</div>\r\n                        <!-- <el-button>查看凭证</el-button><el-button>卖家备注</el-button> -->\r\n                    </el-col>\r\n                    <!-- <el-col :span=\"16\">\r\n                        123\r\n                    </el-col> -->\r\n            </el-row>\r\n            <el-row>\r\n                    <el-col :span=\"16\">\r\n                        <div>订单信息</div>\r\n                            <div style=\"padding-left:20px\">\r\n                                <div>下单人：{{orderdetail.contactName}}</div>\r\n                                <div>下单人手机号：{{orderdetail.contactPhone}}</div>\r\n                                <div>配送方式：{{sendway[orderdetail.sendWay]}}</div>\r\n                                <div>收货信息：{{orderdetail.contactAddress}}</div>\r\n                            </div>                            \r\n                    </el-col>\r\n                    <!-- <el-col :span=\"16\">\r\n                        <div>订单号:454154212</div>\r\n                        <div>交易完成</div>\r\n                        <el-button>查看凭证</el-button><el-button>卖家备注</el-button>\r\n                    </el-col> -->\r\n            </el-row>\r\n            <el-row>\r\n                    <el-col :span=\"16\">\r\n                        <div>付款方式：{{paywaylist[orderdetail.payWay]}}</div>\r\n                        <div>付款时间：{{orderdetail.payTime}}</div>\r\n                        <!-- <div>订单金额：{{orderdetail.payMoney}}</div>  -->\r\n                        <!-- <div>发货仓库：默认仓库</div>                            -->\r\n                    </el-col>\r\n                    <!-- <el-col :span=\"16\">\r\n                       步骤时间\r\n                    </el-col> -->\r\n            </el-row>\r\n            <el-table\r\n                :data=\"orderform\"\r\n                row-key=\"id\"\r\n                border\r\n                size=\"medium \"\r\n                style=\"width: 100%;font-size:22px\">\r\n                    <el-table-column\r\n                    prop=\"cover\"\r\n                    label=\"商品\"\r\n                    min-width=\"160\">\r\n                        <template slot-scope=\"scope\">\r\n                            <!-- <img crossorigin='anonymous'  class=\"prod-img\" :src=\"scope.row.cover\"> -->\r\n                            <div class=\"prod-detail\" :span=\"6\">\r\n                                <div>{{scope.row.productName}}</div>\r\n                            </div>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    prop=\"productNumber\"\r\n                    label=\"商品货号\"\r\n                    min-width=\"150\">\r\n                    </el-table-column>\r\n                    <!-- <el-table-column\r\n                    prop=\"productPrice\"\r\n                    label=\"单价\"\r\n                    min-width=\"180\">\r\n                    </el-table-column> -->\r\n                    <el-table-column\r\n                    prop=\"productNum\"\r\n                    label=\"箱数\"\r\n                    min-width=\"150\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{(Number(scope.row.productNum)/Number(scope.row.weight))}}\r\n                    </template>\r\n                    </el-table-column>\r\n                    <!-- <el-table-column\r\n                    prop=\"renewNumber\"\r\n                    label=\"小计\"\r\n                    min-width=\"180\">\r\n                    <template slot-scope=\"scope\">\r\n                        ￥{{(Number(scope.row.productNum)*Number(scope.row.productPrice)).toFixed(2)}}\r\n                    </template>\r\n                    </el-table-column> -->\r\n                    <el-table-column\r\n                    prop=\"renewPrice\"\r\n                    label=\"运费\"\r\n                    min-width=\"150\">\r\n                    </el-table-column>\r\n                </el-table>\r\n                <el-row>\r\n                    <el-col :span=\"18\">\r\n                                              \r\n                    </el-col>\r\n                    <el-col :span=\"6\">\r\n                        <div>商品合计： ¥{{orderdetail.totalPrice}}</div>\r\n                        <div>优惠：{{orderdetail.discount}}</div>\r\n                        <div>运费：{{orderdetail.freight}}</div>\r\n                        <div>实付款： ¥{{orderdetail.payMoney}}</div>\r\n                    </el-col>\r\n                    <el-col :span=\"24\">备注：</el-col>\r\n                    <el-input  type=\"textarea\"\r\n                        :autosize=\"{ minRows: 6, maxRows: 18}\"\r\n                        v-model=\"infotext\"></el-input>\r\n                </el-row>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport JsPDF from 'jspdf'\r\nimport {\r\n     timeStamp2String\r\n} from '@/api/globalAPI.js'\r\nimport {\r\n     getOrderDetailAPI,\r\n} from '@/api/prodOrderAPI.js'\r\nexport default {\r\n    name:'prodList',\r\n    data(){\r\n        return{\r\n            form:{\r\n                size:10,\r\n                current:1,\r\n                id:''\r\n            },\r\n            infotext:'',\r\n            htmlTitle:'订单信息',\r\n            orderstate:{\r\n                \"-1\":\"已删除\",\r\n                0:\"已关闭\",\r\n                1:\"待确认\",\r\n                2:\"待付款\",\r\n                3:\"待总部处理\",\r\n                4:\"待发货\",\r\n                5:\"待收货\",\r\n                6:\"待评价\",\r\n                7:\"已完成\"\r\n            },\r\n            paywaylist:{\r\n                1:\"打款凭证\",\r\n                2:\"线上支付\"\r\n            },\r\n            sendway:{\r\n                1:\"快递\",\r\n                2:\"自提\",\r\n                3:\"无需物流\"\r\n            },\r\n            orderdetail:{},\r\n            orderform:[]\r\n        };\r\n    },\r\n    components:{\r\n        // AddDepModal,\r\n    },\r\n    props: {\r\n        orderId: {\r\n            required: true,\r\n        },\r\n    },\r\n    methods:{\r\n        /**\r\n         * @msg: 时间处理\r\n         * @param {type} \r\n         * @return: \r\n         */\r\n        timechange(time,type){\r\n            return timeStamp2String(time,type)\r\n        },\r\n        /*\r\n         * 获取订单详情\r\n         */\r\n        getOrderDetail(id){\r\n            this.tableLoading = true;\r\n             getOrderDetailAPI(id)\r\n                .then(res => {\r\n                    const orderdata=res.data.data\r\n                    this.orderdetail=orderdata\r\n                    this.orderform=orderdata.orderProductBackList\r\n\r\n                })\r\n                .catch(err => {\r\n                    this.tableLoading = false;\r\n                })\r\n        },\r\n        printOut(name) {\r\n            let shareContent = document.body,//需要截图的包裹的（原生的）DOM 对象\r\n            width = shareContent.clientWidth, //获取dom 宽度\r\n            height = shareContent.clientHeight, //获取dom 高度\r\n            canvas = document.createElement(\"canvas\"), //创建一个canvas节点\r\n            scale = 2; //定义任意放大倍数 支持小数\r\n                canvas.width = width * scale; //定义canvas 宽度 * 缩放\r\n                canvas.height = height * scale; //定义canvas高度 *缩放\r\n                canvas.style.width = shareContent.clientWidth * scale + \"px\";\r\n                canvas.style.height = shareContent.clientHeight * scale + \"px\";\r\n                canvas.getContext(\"2d\").scale(scale, scale); //获取context,设置scale\r\n                let opts = {\r\n                scale: scale, // 添加的scale 参数\r\n                canvas: canvas, //自定义 canvas\r\n                logging: false, //日志开关，便于查看html2canvas的内部执行流程\r\n                width: width, //dom 原始宽度\r\n                height: height,\r\n                useCORS: true, // 【重要】开启跨域配置\r\n                };\r\n\r\n            html2Canvas(shareContent, opts).then(() => {\r\n            var contentWidth = canvas.width;\r\n            var contentHeight = canvas.height;\r\n            //一页pdf显示html页面生成的canvas高度;\r\n            var pageHeight = (contentWidth / 592.28) * 841.89;\r\n            //未生成pdf的html页面高度\r\n            var leftHeight = contentHeight;\r\n            //页面偏移\r\n            var position = 0;\r\n            //a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高\r\n            var imgWidth = 595.28;\r\n            var imgHeight = (592.28 / contentWidth) * contentHeight;\r\n            var pageData = canvas.toDataURL(\"image/jpeg\", 1.0);\r\n            var PDF = new JsPDF(\"\", \"pt\", \"a4\");\r\n            if (leftHeight < pageHeight) {\r\n                PDF.addImage(pageData, \"JPEG\", 0, 0, imgWidth, imgHeight);\r\n            } else {\r\n                while (leftHeight > 0) {\r\n                PDF.addImage(pageData, \"JPEG\", 0, position, imgWidth, imgHeight);\r\n                leftHeight -= pageHeight;\r\n                position -= 841.89;\r\n                if (leftHeight > 0) {\r\n                    PDF.addPage();\r\n                }\r\n                }\r\n            }\r\n            PDF.save(name + \".pdf\"); // 这里是导出的文件名\r\n            });\r\n        },\r\n    },\r\n    mounted(){\r\n        this.getOrderDetail(this.orderId)\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.prod-img{\r\n  max-width: 64px;\r\n    min-width: 64px;\r\n    width: 64px;\r\n    height: 64px;\r\n    line-height: 64px;\r\n    border-radius: 4px;\r\n}\r\n.prod-detail{\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n  line-height: 24px;\r\n}\r\n.table_body{\r\n    font-size: 24px\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\allOrderManage"}]}