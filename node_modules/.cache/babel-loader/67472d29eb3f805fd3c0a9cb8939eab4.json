{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js!E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\adminRole\\adminRoleSetPower.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\adminRole\\adminRoleSetPower.vue","mtime":1576992693510},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport actionItem from './actionItem';\nimport { getAdminActionListAPI, getAdminRolePowerListAPI } from '@/api/adminRoleApi.js';\nimport { updateAdminRolePowerAPI } from '@/api/adminRoleApi.js';\nexport default {\n  name: 'editor',\n  data: function data() {\n    return {\n      // 规格列表\n      dataForm: {},\n      checkList: [],\n      actionIds: [],\n      actionList: [],\n      powerList: []\n    };\n  },\n  components: {\n    actionItem: actionItem\n  },\n  props: {\n    roleId: {\n      required: true\n    }\n  },\n  methods: {\n    //获取子组件的值\n    showMessageFromChild: function showMessageFromChild(data) {\n      console.log(\"data:\" + data);\n      this.checkList = data;\n    },\n    dataFormSubmit: function dataFormSubmit() {\n      var _this = this;\n\n      console.log(\"roleId:\" + this.roleId);\n      console.log(this.checkList);\n      this.$refs['dataForm'].validate(function (valid) {\n        var ids = '';\n\n        for (var i = 0; i < _this.checkList.length; i++) {\n          ids += _this.checkList[i] + \",\";\n        }\n\n        console.log(ids);\n\n        if (valid) {\n          var params = {\n            roleId: _this.roleId,\n            ids: ids\n          };\n          updateAdminRolePowerAPI(params).then(function (res) {\n            var sucresponse = res.data;\n\n            if (sucresponse.code == 200) {\n              _this.$message({\n                type: 'success',\n                message: '设置成功'\n              });\n\n              _this.$emit('close-form');\n\n              _this.$emit('finish-action');\n            } else {\n              _this.errorMsg(sucresponse.message);\n            }\n          }).catch(function (err) {\n            console.log(err);\n          });\n          console.log(params);\n        }\n      });\n    },\n    getAdminActionList: function getAdminActionList() {\n      var _this2 = this;\n\n      console.log(\"getAdminActionList\");\n      var params = {\n        roleId: this.roleId\n      };\n      getAdminActionListAPI(params).then(function (res) {\n        console.log(\"getAdminActionListAPI 返回\");\n        var data = res.data.data.actionList;\n        var powerList = res.data.data.powerList;\n        var checkArray = [];\n\n        for (var i = 0; i < powerList.length; i++) {\n          checkArray.push(powerList[i].actionId);\n        }\n\n        _this2.checkList = checkArray;\n        _this2.actionList = data;\n        console.log(_this2.actionList);\n        console.log(_this2.checkList);\n      }).catch(function (err) {});\n    },\n    errorMsg: function errorMsg(message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      });\n    },\n\n    /*\n      * 返回上层\n      */\n    backhtmls: function backhtmls() {\n      this.$emit('close-form');\n    }\n  },\n  mounted: function mounted() {\n    console.log(\"mounted方法\");\n    this.getAdminActionList();\n  }\n};",null]}