{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js!E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\agentLevelSetUp\\agentLevelSetUpInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\agentLevelSetUp\\agentLevelSetUpInfo.vue","mtime":1573043726499},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { timeStamp2String } from '@/api/globalAPI.js';\nimport { getAgentLevelInfoAPI, postAgentLevelUpdateAPI } from '@/api/agentAduitAPI.js';\nexport default {\n  name: 'prodList',\n  data: function data() {\n    return {\n      isDiscount: '0',\n      agentid: '',\n      dataForm: {\n        title: '',\n        istask: '0',\n        sales: '',\n        typeId: 1\n      },\n      timelist: [{\n        name: '永久',\n        value: 0\n      }, {\n        name: '1个月',\n        value: 1\n      }, {\n        name: '2个月',\n        value: 2\n      }, {\n        name: '3个月',\n        value: 3\n      }, {\n        name: '4个月',\n        value: 4\n      }, {\n        name: '5个月',\n        value: 5\n      }, {\n        name: '6个月',\n        value: 6\n      }, {\n        name: '7个月',\n        value: 7\n      }, {\n        name: '8个月',\n        value: 8\n      }, {\n        name: '9个月',\n        value: 9\n      }, {\n        name: '10个月',\n        value: 10\n      }, {\n        name: '11个月',\n        value: 11\n      }, {\n        name: '12个月',\n        value: 12\n      }, {\n        name: '13个月',\n        value: 13\n      }, {\n        name: '14个月',\n        value: 14\n      }, {\n        name: '15个月',\n        value: 15\n      }, {\n        name: '16个月',\n        value: 16\n      }, {\n        name: '17个月',\n        value: 17\n      }, {\n        name: '18个月',\n        value: 18\n      }, {\n        name: '19个月',\n        value: 19\n      }, {\n        name: '20个月',\n        value: 20\n      }, {\n        name: '21个月',\n        value: 21\n      }, {\n        name: '22个月',\n        value: 22\n      }, {\n        name: '23个月',\n        value: 23\n      }, {\n        name: '24个月',\n        value: 24\n      }, {\n        name: '36个月',\n        value: 36\n      }],\n      stock_type: 1\n    };\n  },\n  components: {// AddDepModal,\n  },\n  props: {\n    agentlevelId: {\n      required: true\n    }\n  },\n  methods: {\n    /**\r\n     * @msg: 时间处理\r\n     * @param {type} \r\n     * @return: \r\n     */\n    timechange: function timechange(time, type) {\n      return timeStamp2String(time, type);\n    },\n\n    /**\r\n     * @msg: 获取等级详情\r\n     * @param {type} \r\n     * @return: \r\n     */\n    getAgentLevelInfo: function getAgentLevelInfo() {\n      var _this = this;\n\n      getAgentLevelInfoAPI(this.agentid).then(function (res) {\n        var agentleveldata = res.data.data;\n        _this.dataForm = agentleveldata;\n\n        if (agentleveldata.firstDiscount != null && agentleveldata.firstDiscount != '') {\n          _this.isDiscount = 1;\n        }\n\n        _this.dataForm.isTask = '' + _this.dataForm.isTask;\n        console.log(_this.dataForm);\n        _this.dataForm.stockDiscount = Number(_this.dataForm.stockDiscount) * 100;\n      }).catch(function (err) {\n        _this.tableLoading = false;\n      });\n    },\n    dataFormSubmit: function dataFormSubmit() {\n      var _this2 = this;\n\n      var that = this;\n      this.$refs['dataForm'].validate(function (valid) {\n        if (valid) {\n          var params = _this2.dataForm;\n          params.id = Number(params.id);\n          params.stockType = 1;\n          var pushdata = {\n            stockType: 1,\n            stockDiscount: Number(params.stockDiscount) / 100,\n            id: params.id,\n            firstDiscount: params.firstDiscount,\n            isDarklevel: params.isDarklevel,\n            isTask: Number(params.isTask),\n            level: params.level,\n            minStock: Number(params.minStock),\n            nick: params.nick,\n            registPrompt: params.registPrompt,\n            taskAmount: Number(params.taskAmount),\n            timeLimit: params.timeLimit\n          };\n          postAgentLevelUpdateAPI(pushdata).then(function (res) {\n            var sucresponse = res.data;\n\n            if (sucresponse.code == 200) {\n              _this2.$message({\n                type: 'success',\n                message: '修改等级成功'\n              });\n\n              _this2.$emit('close-form');\n\n              _this2.$emit('finish-action');\n            } else {\n              _this2.errorMsg(sucresponse.message);\n            }\n          }).catch(function (err) {\n            console.log(err);\n            _this2.tableLoading = false;\n          });\n        }\n      });\n    },\n    errorMsg: function errorMsg(message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      });\n    }\n  },\n  mounted: function mounted() {\n    console.log(this.agentlevelId);\n    this.agentid = this.agentlevelId;\n    this.getAgentLevelInfo();\n  }\n};",null]}