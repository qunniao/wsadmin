{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js!E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\prod\\sku-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\prod\\sku-table.vue","mtime":1572081809907},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.object.assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// import PicUpload from '@/components/pic-upload'\nexport default {\n  data: function data() {\n    return {\n      // 数据库中的规格\n      dbSpecs: [],\n      // 根据选定的规格所查询出来的规格值\n      dbSpecValues: [],\n      specs: [],\n      // 使用的规格\n      initing: false\n    };\n  },\n  components: {// PicUpload\n  },\n  props: {\n    value: {\n      default: [],\n      type: Array\n    }\n  },\n  watch: {},\n  // activated: function () {\n  //   this.$emit('input', [Object.assign({}, this.defalutSku)])\n  // },\n  created: function created() {// this.$http({\n    //   url: this.$http.adornUrl(`/prod/spec/list`),\n    //   method: 'get',\n    //   params: this.$http.adornParams()\n    // }).then(({data}) => {\n    //   this.dbSpecs = data\n    // })\n  },\n  computed: {\n    tableLeftTitles: function tableLeftTitles() {\n      var res = [];\n\n      for (var i = 0; i < this.skuTags.length; i++) {\n        var skuTag = this.skuTags[i];\n        res.push(skuTag.tagName);\n      }\n\n      return res;\n    },\n    skuTags: {\n      get: function get() {\n        return this.$store.state.prod.skuTags;\n      }\n    },\n    defalutSku: function defalutSku() {\n      return this.$store.state.prod.defalutSku;\n    }\n  },\n  methods: {\n    init: function init() {\n      this.initing = true;\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error('上传头像图片只能是 JPG或者PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isJPG && isLt2M;\n    },\n    getTableSpecData: function getTableSpecData() {\n      return this.value;\n    },\n    tableSpanMethod: function tableSpanMethod(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n    },\n    changeSkuCover: function changeSkuCover(index, res) {\n      console.log(res);\n      console.log(index);\n      this.value[index].pic = res.data;\n    },\n    changeSkuStatus: function changeSkuStatus(tagIndex) {\n      this.value[tagIndex].status = this.value[tagIndex].status ? 0 : 1;\n    },\n    skuAddProdName: function skuAddProdName() {\n      if (this.initing) {\n        return;\n      }\n\n      var skuList = [];\n\n      for (var i = 0; i < this.value.length; i++) {\n        var sku = Object.assign({}, this.value[i]);\n\n        if (!sku.properties) {\n          return;\n        }\n\n        sku.skuName = '';\n        var properties = sku.properties.split(';');\n\n        for (var propertiesKey in properties) {\n          sku.skuName += properties[propertiesKey].split(':')[1] + ' ';\n        }\n\n        skuList.push(sku);\n      }\n\n      this.$emit('input', skuList);\n    }\n  }\n};",{"version":3,"sources":["sku-table.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"mod-prod-sku-table\">\n    <el-form-item>\n      <el-table\n        :data=\"value\"\n        border\n        style=\"width: 100%; margin-top: 20px\"\n         :span-method=\"tableSpanMethod\">\n        <el-table-column v-for=\"(leftTitle, index) in tableLeftTitles\" :key=\"index\" :label=\"leftTitle\">\n          <template slot-scope=\"scope\">\n            {{scope.row.properties.split(';')[index].split(':')[1]}}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"productNumber\"\n          label=\"规格货号\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.productNumber\" type=\"number\" :disabled=\"!scope.row.status\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"price\"\n          label=\"价格\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.price\" type=\"number\" :disabled=\"!scope.row.status\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"weight\"\n          label=\"重量\">\n          <template slot-scope=\"scope\">\n            <el-input v-model=\"scope.row.weight\" type=\"number\" :disabled=\"!scope.row.status\"></el-input>\n          </template>\n        </el-table-column>\n        <el-table-column v-if=\"tableLeftTitles.length\"\n          prop=\"pic\"\n          label=\"sku图片\"\n          width=\"180\">\n          <template slot-scope=\"scope\">\n            <el-upload\n              class=\"pic-uploader-component\"\n              action=\"http://admin.zhanchengwlkj.com:8080/derivative_system_backstage/file/addFile\"\n              :show-file-list=\"false\"\n              name=\"files\"\n              :on-success=\"(value)=> changeSkuCover(`${scope.$index}`,value)\"\n              :before-upload=\"beforeAvatarUpload\">\n              <img v-if=\"scope.row.pic\" :src=\"scope.row.pic\" class=\"pic\">\n              <i v-else class=\"el-icon-plus pic-uploader-icon\"></i>\n            </el-upload>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-form-item>\n  </div>\n</template>\n\n<script>\n  // import PicUpload from '@/components/pic-upload'\n  export default {\n    data () {\n      return {\n        // 数据库中的规格\n        dbSpecs: [],\n        // 根据选定的规格所查询出来的规格值\n        dbSpecValues: [],\n        specs: [], // 使用的规格\n        initing: false\n      }\n    },\n    components: {\n      // PicUpload\n    },\n    props: {\n      value: {\n        default: [],\n        type: Array\n      },\n    },\n    watch: {\n    },\n    // activated: function () {\n    //   this.$emit('input', [Object.assign({}, this.defalutSku)])\n    // },\n    created: function () {\n      // this.$http({\n      //   url: this.$http.adornUrl(`/prod/spec/list`),\n      //   method: 'get',\n      //   params: this.$http.adornParams()\n      // }).then(({data}) => {\n      //   this.dbSpecs = data\n      // })\n    },\n    computed: {\n      tableLeftTitles () {\n        let res = []\n        for (let i = 0; i < this.skuTags.length; i++) {\n          const skuTag = this.skuTags[i]\n          res.push(skuTag.tagName)\n        }\n        return res\n      },\n      skuTags: {\n        get () { return this.$store.state.prod.skuTags }\n      },\n      defalutSku () {\n        return this.$store.state.prod.defalutSku\n      }\n    },\n    methods: {\n      init () {\n        this.initing = true\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG) {\n          this.$message.error('上传头像图片只能是 JPG或者PNG 格式!');\n        }\n        if (!isLt2M) {\n          this.$message.error('上传头像图片大小不能超过 2MB!');\n        }\n        return isJPG && isLt2M;\n      },  \n      getTableSpecData () {\n        return this.value\n      },\n      tableSpanMethod ({ row, column, rowIndex, columnIndex }) {\n\n      },\n      changeSkuCover(index,res){\n        console.log(res)\n        console.log(index)\n        this.value[index].pic = res.data\n        \n      },\n      changeSkuStatus (tagIndex) {\n        this.value[tagIndex].status = this.value[tagIndex].status ? 0 : 1\n      },\n      skuAddProdName () {\n        if (this.initing) {\n          return\n        }\n        let skuList = []\n        for (let i = 0; i < this.value.length; i++) {\n          const sku = Object.assign({}, this.value[i])\n          if (!sku.properties) {\n            return\n          }\n          sku.skuName = ''\n          let properties = sku.properties.split(';')\n          for (const propertiesKey in properties) {\n            sku.skuName += properties[propertiesKey].split(':')[1] + ' '\n          }\n          skuList.push(sku)\n        }\n        this.$emit('input', skuList)\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\">\n\n  .mod-prod-sku-table{\n    .pic-uploader-component .el-upload {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n      .pic-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 120px;\n        height: 120px;\n        line-height: 120px;\n        text-align: center;\n      }\n      .pic {\n        width: 120px;\n        height: 120px;\n        display: block;\n      }\n    }\n    .pic-uploader-component .el-upload:hover {\n      border-color: #409EFF;\n    }\n  }\n</style>\n"],"sourceRoot":"src\\components\\prod"}]}