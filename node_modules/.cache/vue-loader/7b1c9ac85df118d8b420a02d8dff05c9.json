{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\freightTemplate\\freightTemplateInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\freightTemplate\\freightTemplateInfo.vue","mtime":1572256165393},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    addFreightAPI,\n    getFrieghtListAPI,\n    putFreightAPI\n} from '@/api/prodFreightAPI.js'\nexport default {\n   name:'editor',\n  data () {\n    return {\n      // 运费模板\n      freightId:'0',\n      checked:false,\n      tableData:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:0,\n        type: 1,\n        renewPrice:'',\n      }],\n      tableDatatwo:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:'',\n        type: 1,\n        renewPrice:'',\n      }],\n      checkList:[],\n      shopup:'',\n      dataForm:{\n        text:'',\n        title:'',\n        valuationWay:'1',\n        transportWay:''\n        // domains: [],\n      },\n      imageShowUrl:''\n      // resourcesUrl: window.SITE_CONFIG.resourcesUrl\n    }\n  },\n  components: {\n\n  },\n  props: {\n    prodgroupId: {\n      required: true,\n    },\n  },\n  computed: {\n  },\n  methods: {\n    /*\n      * 获取添加运费模板\n      */\n    pushGroupFormData () {\n        this.$refs['dataForm'].validate((valid) => {\n          if(valid){\n            let pushdata={\n              title:this.dataForm.title,\n              transportWay:this.dataForm.transportWay,\n              valuationWay:Number(this.dataForm.valuationWay),\n              defaultBuyins: 0,\n              defaultRetail: 0,\n              defaultStock: 0,\n              defaultTake: 0,\n              freightRegionList:[]\n            }\n            for(let i=0;i<this.checkList.length;i++){\n              if(this.checkList[i]==\"采购订单\"){\n                pushdata.defaultStock=1\n              }else if(this.checkList[i]==\"内购订单\"){\n                pushdata.defaultBuyins=1\n              }else if(this.checkList[i]==\"提货订单\"){\n                pushdata.defaultTake=1  \n              }else{\n                pushdata.defaultRetail=1\n              }\n            }\n            pushdata.freightRegionList.push(this.tableData[0])\n            if(this.checked){\n              pushdata.freightRegionList.push(this.tableDatatwo[0])\n            }\n            if(this.freightId!=0){\n              pushdata.id=this.freightId\n              putFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '修改成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }else{\n              addFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '添加成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }\n          }\n        })\n    },\n    getFreightDetail(id){\n      getFrieghtListAPI(id)\n         .then(res => {\n            const response = res.data.data;\n            this.dataForm.title=response.title\n            this.dataForm.transportWay=response.transportWay\n            this.dataForm.valuationWay=''+response.valuationWay\n            if(response.defaultStock==1){\n              this.checkList.push('采购订单')\n            }\n            if(response.defaultBuyins==1){\n              this.checkList.push('内购订单')\n            }\n            if(response.defaultTake==1){\n              this.checkList.push('提货订单')\n            }\n            if(response.defaultRetail==1){\n              this.checkList.push('零售订单')\n            }\n            if(response.freightRegionList.length>1){\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n              this.tableDatatwo=[]\n              this.tableDatatwo.push(response.freightRegionList[1])\n            }else{\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n            }\n          })\n          .catch(err => {\n            console.log(err)\n            this.tableLoading = false;\n          })\n    },\n    errorMsg (message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      })\n    },\n    /*\n      * 返回上层\n      */\n    backhtmls(){\n        this.$emit('close-form')\n    }    \n  },\n  mounted() {\n    if(this.prodgroupId!=0){\n      this.getFreightDetail(this.prodgroupId)\n      this.freightId=this.prodgroupId\n    }\n    console.log(this.prodgroupId)\n  },\n}\n",{"version":3,"sources":["freightTemplateInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"freightTemplateInfo.vue","sourceRoot":"src\\components\\freightTemplate","sourcesContent":["<template>\n  <div class=\"mod-prod-info\">\n    <el-form :model=\"dataForm\"\n             ref=\"dataForm\"\n             label-width=\"150px\">\n      <el-form-item label=\"模板名称:\"\n                    prop=\"title\"\n                    :rules=\"[{ required: true, message: '模板名称不能为空'}]\">\n        <el-col :span=\"10\">\n          <el-input\n            type=\"text\"\n            placeholder=\"请输入模板名称\"\n            v-model=\"dataForm.title\"\n            maxlength=\"18\"\n            show-word-limit\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item label-width=\"180px\" label=\"计价方式：\">\n          <el-radio v-model=\"dataForm.valuationWay\" label=\"1\">按重量</el-radio>\n          <el-radio v-model=\"dataForm.valuationWay\" label=\"2\">按件数</el-radio>\n      </el-form-item>\n      <el-form-item label-width=\"180px\" label=\"设为默认\">\n          <el-checkbox-group v-model=\"checkList\">\n                <el-checkbox label=\"采购订单\"></el-checkbox>\n                <el-checkbox label=\"内购订单\"></el-checkbox>\n                <el-checkbox label=\"提货订单\"></el-checkbox>\n                <el-checkbox label=\"零售订单\"></el-checkbox>\n          </el-checkbox-group>\n      </el-form-item>\n      <el-form-item label=\"运送方式(默认):\"\n                    prop=\"transportWay\"\n                    :rules=\"[{ required: true, message: '运送方式名称不能为空'}]\">\n        <el-col :span=\"6\">\n          <el-input\n            type=\"text\"\n            placeholder=\"例如顺丰快递、平邮\"\n            v-model=\"dataForm.transportWay\"\n            maxlength=\"18\"\n            show-word-limit\n          ></el-input>\n        </el-col>\n      </el-form-item>\n      <el-form-item>\n        <div class=\"mod-prod-sku-table\">\n          <el-form-item>\n            <el-table\n              :data=\"tableData\"\n              border\n              style=\"width: 100%; margin-top: 20px\"\n              >\n              <el-table-column\n                label=\"配送区域\">\n                <template>\n                  全部默认运费\n                </template>\n              </el-table-column>\n              <el-table-column\n                prop=\"firstNumber\"\n                :label=\"dataForm.valuationWay==1?'首重(g)':'首件(件)'\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.firstNumber\" type=\"number\"></el-input>\n                </template>\n              </el-table-column>\n              <el-table-column\n                prop=\"firstPrice\"\n                label=\"首费\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.firstPrice\" type=\"number\" ></el-input>\n                </template>\n              </el-table-column>\n              <el-table-column\n                prop=\"renewNumber\"\n                :label=\"dataForm.valuationWay==1?'续重(g)':'续件(件)'\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.renewNumber\" type=\"number\"></el-input>\n                </template>\n              </el-table-column>\n              <el-table-column\n                prop=\"renewPrice\"\n                label=\"续费\">\n                <template slot-scope=\"scope\">\n                  <el-input v-model=\"scope.row.renewPrice\" type=\"number\" ></el-input>\n                </template>\n              </el-table-column>\n            </el-table>\n          </el-form-item>\n        </div>\n      </el-form-item>\n      <el-form-item>\n         <el-checkbox v-model=\"checked\">大批量购买运费</el-checkbox>\n         <div v-if=\"checked\">\n           <el-col :span=\"2\">{{dataForm.valuationWay==1?'重量':'件数'}}满</el-col><el-col :span=\"8\"><el-input v-model=\"tableDatatwo[0].isLarge\"></el-input></el-col><label>{{dataForm.valuationWay==1?'kg':'件'}}时，按以下方式计算运费</label>\n          <div class=\"mod-prod-sku-table\" >\n            <el-form-item>\n              <el-table\n                :data=\"tableDatatwo\"\n                border\n                style=\"width: 100%; margin-top: 20px\"\n                >\n                <el-table-column\n                  label=\"配送区域\">\n                  <template>\n                    全部默认运费\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  prop=\"firstNumber\"\n                  :label=\"dataForm.valuationWay==1?'首重(g)':'首件(件)'\">\n                  <template slot-scope=\"scope\">\n                    <el-input v-model=\"scope.row.firstNumber\" type=\"number\"></el-input>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  prop=\"firstPrice\"\n                  label=\"首费\">\n                  <template slot-scope=\"scope\">\n                    <el-input v-model=\"scope.row.firstPrice\" type=\"number\" ></el-input>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  prop=\"renewNumber\"\n                  :label=\"dataForm.valuationWay==1?'续重(g)':'续件(件)'\">\n                  <template slot-scope=\"scope\">\n                    <el-input v-model=\"scope.row.renewNumber\" type=\"number\"></el-input>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  prop=\"renewPrice\"\n                  label=\"续费\">\n                  <template slot-scope=\"scope\">\n                    <el-input v-model=\"scope.row.renewPrice\" type=\"number\" ></el-input>\n                  </template>\n                </el-table-column>\n              </el-table>\n            </el-form-item>\n          </div>\n        </div>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\"\n                   @click=\"pushGroupFormData()\">确定</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport {\n    addFreightAPI,\n    getFrieghtListAPI,\n    putFreightAPI\n} from '@/api/prodFreightAPI.js'\nexport default {\n   name:'editor',\n  data () {\n    return {\n      // 运费模板\n      freightId:'0',\n      checked:false,\n      tableData:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:0,\n        type: 1,\n        renewPrice:'',\n      }],\n      tableDatatwo:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:'',\n        type: 1,\n        renewPrice:'',\n      }],\n      checkList:[],\n      shopup:'',\n      dataForm:{\n        text:'',\n        title:'',\n        valuationWay:'1',\n        transportWay:''\n        // domains: [],\n      },\n      imageShowUrl:''\n      // resourcesUrl: window.SITE_CONFIG.resourcesUrl\n    }\n  },\n  components: {\n\n  },\n  props: {\n    prodgroupId: {\n      required: true,\n    },\n  },\n  computed: {\n  },\n  methods: {\n    /*\n      * 获取添加运费模板\n      */\n    pushGroupFormData () {\n        this.$refs['dataForm'].validate((valid) => {\n          if(valid){\n            let pushdata={\n              title:this.dataForm.title,\n              transportWay:this.dataForm.transportWay,\n              valuationWay:Number(this.dataForm.valuationWay),\n              defaultBuyins: 0,\n              defaultRetail: 0,\n              defaultStock: 0,\n              defaultTake: 0,\n              freightRegionList:[]\n            }\n            for(let i=0;i<this.checkList.length;i++){\n              if(this.checkList[i]==\"采购订单\"){\n                pushdata.defaultStock=1\n              }else if(this.checkList[i]==\"内购订单\"){\n                pushdata.defaultBuyins=1\n              }else if(this.checkList[i]==\"提货订单\"){\n                pushdata.defaultTake=1  \n              }else{\n                pushdata.defaultRetail=1\n              }\n            }\n            pushdata.freightRegionList.push(this.tableData[0])\n            if(this.checked){\n              pushdata.freightRegionList.push(this.tableDatatwo[0])\n            }\n            if(this.freightId!=0){\n              pushdata.id=this.freightId\n              putFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '修改成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }else{\n              addFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '添加成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }\n          }\n        })\n    },\n    getFreightDetail(id){\n      getFrieghtListAPI(id)\n         .then(res => {\n            const response = res.data.data;\n            this.dataForm.title=response.title\n            this.dataForm.transportWay=response.transportWay\n            this.dataForm.valuationWay=''+response.valuationWay\n            if(response.defaultStock==1){\n              this.checkList.push('采购订单')\n            }\n            if(response.defaultBuyins==1){\n              this.checkList.push('内购订单')\n            }\n            if(response.defaultTake==1){\n              this.checkList.push('提货订单')\n            }\n            if(response.defaultRetail==1){\n              this.checkList.push('零售订单')\n            }\n            if(response.freightRegionList.length>1){\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n              this.tableDatatwo=[]\n              this.tableDatatwo.push(response.freightRegionList[1])\n            }else{\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n            }\n          })\n          .catch(err => {\n            console.log(err)\n            this.tableLoading = false;\n          })\n    },\n    errorMsg (message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      })\n    },\n    /*\n      * 返回上层\n      */\n    backhtmls(){\n        this.$emit('close-form')\n    }    \n  },\n  mounted() {\n    if(this.prodgroupId!=0){\n      this.getFreightDetail(this.prodgroupId)\n      this.freightId=this.prodgroupId\n    }\n    console.log(this.prodgroupId)\n  },\n}\n</script>\n<style scoped=\"scoped\" lang=\"less\">\n.mbline{\n  margin-top:24px;\n  padding-left: 20px;\n  line-height: 40px;\n  background: rgb(249, 249, 249);\n}\n.mod-prod-sku-table{\n    .pic-uploader-component .el-upload {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n      .pic-uploader-icon {\n        font-size: 28px;\n        color: #8c939d;\n        width: 120px;\n        height: 120px;\n        line-height: 120px;\n        text-align: center;\n      }\n      .pic {\n        width: 120px;\n        height: 120px;\n        display: block;\n      }\n    }\n    .pic-uploader-component .el-upload:hover {\n      border-color: #409EFF;\n    }\n  }\n</style>"]}]}