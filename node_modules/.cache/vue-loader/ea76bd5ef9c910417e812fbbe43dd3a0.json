{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\agentInvitationSetUp\\agentInvitationSetUpIndex.vue?vue&type=style&index=0&id=3d30d293&scoped=true&lang=less&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\agentInvitationSetUp\\agentInvitationSetUpIndex.vue","mtime":1573368342335},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\less-loader\\dist\\cjs.js","mtime":1576862572617},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\style-resources-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.mbline{\r\n  margin-top:24px;\r\n  padding-left: 20px;\r\n  line-height: 40px;\r\n  background: rgb(249, 249, 249);\r\n}\r\n",{"version":3,"sources":["agentInvitationSetUpIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"agentInvitationSetUpIndex.vue","sourceRoot":"src\\components\\agentInvitationSetUp","sourcesContent":["/*\r\n * @Description: 代理邀请设置\r\n * @Author: jian.weng\r\n * @Date: 2019-10-29 10:49:29\r\n */\r\n\r\n<template>\r\n    <div style=\"padding-top:40px\"> \r\n        <el-form :model=\"dataForm\"\r\n            ref=\"dataForm\"\r\n            label-width=\"150px\">\r\n           <el-form-item label-width=\"180px\" label=\"代理方式：\" prop=\"checkList\">\r\n                <el-checkbox-group v-model=\"dataForm.checkList\"  >\r\n                          <el-checkbox v-for=\"item in agentLevelList\" :label=\"item.value\" :key=\"item.value\">{{item.name}}</el-checkbox>\r\n                </el-checkbox-group>\r\n            </el-form-item>\r\n            <el-form-item label-width=\"180px\" label=\"总部邀请代理链接：\">\r\n                {{dataForm.url}}<el-button style=\"margin-left:10px\"  class=\"tag-read\" :data-clipboard-text=\"dataForm.url\" @click=\"copy\">复制链接</el-button>\r\n            </el-form-item>\r\n            <el-form-item label-width=\"180px\" label=\"总部邀请代理链接：\">\r\n                <div id=\"qrcode\" ref=\"qrCodeDiv\"></div>\r\n                <el-button style=\"margin-top:10px;\" type=\"保存到本地\"\r\n                        @click=\"downcodes()\">下载到本地</el-button>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\"\r\n                        @click=\"dataFormSubmit()\">确定</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport QRCode from 'qrcodejs2';\r\nimport Clipboard from 'clipboard';\r\nimport {\r\n     timeStamp2String,\r\n} from '@/api/globalAPI.js'\r\nexport default {\r\n    name:'prodList',\r\n    data(){\r\n        return{\r\n            isDiscount:'0',\r\n            agentid:'',\r\n            agentLevelList:[{name:'董事',value:1},{name:'钻石',value:2},{name:'省代',value:3},{name:'市代',value:4},{name:'VIP399套餐',value:5}],\r\n            dataForm:{\r\n                checkList:[],\r\n                url:'http://ws.zhanchengwlkj.com/zhuce.html?id=0'\r\n            },\r\n            timelist:[\r\n\r\n            ],\r\n            stock_type:1,\r\n        };\r\n    },\r\n    components:{\r\n        // AddDepModal,\r\n    },\r\n    props: {\r\n    },\r\n    methods:{\r\n        /**\r\n         * @msg: 时间处理\r\n         * @param {type} \r\n         * @return: \r\n         */\r\n        timechange(time,type){\r\n            return timeStamp2String(time,type)\r\n        },\r\n         copy() {\r\n            var clipboard = new Clipboard('.tag-read')\r\n            clipboard.on('success', e => {\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '复制成功',\r\n                });\r\n              // 释放内存\r\n              clipboard.destroy()\r\n            })\r\n            clipboard.on('error', e => {\r\n              // 不支持复制\r\n              console.log('该浏览器不支持自动复制')\r\n              // 释放内存\r\n              clipboard.destroy()\r\n            })\r\n          },\r\n        dataFormSubmit () {\r\n          let that=this;\r\n            this.$refs['dataForm'].validate((valid) => {\r\n                if(valid){\r\n                    const params =this.dataForm\r\n                    console.log(params)\r\n                }\r\n            })\r\n        },errorMsg (message) {\r\n            this.$message({\r\n                message: message,\r\n                type: 'error',\r\n                duration: 1500\r\n            })\r\n        },codeshow(){\r\n            new QRCode(this.$refs.qrCodeDiv, {\r\n            text: 'http://ws.zhanchengwlkj.com/zhuce.html?id=0',\r\n            width: 200,\r\n            height: 200,\r\n            colorDark: \"#333333\", //二维码颜色\r\n            colorLight: \"#ffffff\", //二维码背景色\r\n            correctLevel: QRCode.CorrectLevel.L//容错率，L/M/H\r\n            })\r\n        },downcodes(){\r\n            let myCanvas = document.getElementById('qrcode').getElementsByTagName('canvas');\r\n            let img=document.getElementById('qrcode').getElementsByTagName('img')\r\n            // // //创建一个a标签节点\r\n            let a= document.createElement(\"a\")\r\n            // //设置a标签的href属性（将canvas变成png图片）\r\n            let imgURL=myCanvas[0].toDataURL('image/jpg');\r\n            let ua = navigator.userAgent;\r\n            if (ua.indexOf(\"Trident\") != -1 && ua.indexOf(\"Windows\") != -1) { // IE内核 并且  windows系统 情况下 才执行;\r\n                var bstr = atob(imgURL.split(',')[1])\r\n                var n = bstr.length\r\n                var u8arr = new Uint8Array(n)\r\n                while (n--) {\r\n                  u8arr[n] = bstr.charCodeAt(n)\r\n                }\r\n                var blob = new Blob([u8arr])\r\n                window.navigator.msSaveOrOpenBlob(blob, '下载' + '.' + 'png')\r\n            }else if(ua.indexOf(\"Firefox\") > -1){ //火狐兼容下载\r\n                let blob = this.base64ToBlob(imgURL); //new Blob([content]);\r\n                let evt = document.createEvent(\"HTMLEvents\");\r\n                evt.initEvent(\"click\", true, true);//initEvent 不加后两个参数在FF下会报错  事件类型，是否冒泡，是否阻止浏览器的默认行为\r\n                a.download = ' ';//下载图片名称，如果填内容识别不到，下载为未知文件，所以我这里就不填为空\r\n                a.href = URL.createObjectURL(blob);\r\n                a.dispatchEvent(new MouseEvent('click', {bubbles: true, cancelable: true, view: window}));//兼容火狐\r\n            }else{ //谷歌兼容下载\r\n                img.src=myCanvas[0].toDataURL('image/jpg');\r\n                // a.href = myCanvas[0].toDataURL('image/png').replace('image/png', 'image/octet-stream')\r\n                a.href=img.src\r\n                //设置下载文件的名字\r\n                a.download = \"下载\"\r\n                 //点击\r\n                a.click()\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n      this.codeshow()\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.el-row{\r\n    padding: 10px;\r\n    border:1px solid #000;\r\n}\r\n.mbline{\r\n  margin-top:24px;\r\n  padding-left: 20px;\r\n  line-height: 40px;\r\n  background: rgb(249, 249, 249);\r\n}\r\n</style>\r\n\r\n"]}]}