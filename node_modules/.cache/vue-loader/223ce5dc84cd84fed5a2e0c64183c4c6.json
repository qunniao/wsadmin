{"remainingRequest":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\HtmlProjects\\wsadmin\\src\\components\\freightTemplate\\freightTemplateInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\HtmlProjects\\wsadmin\\src\\components\\freightTemplate\\freightTemplateInfo.vue","mtime":1572256165393},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1576862582236},{"path":"E:\\HtmlProjects\\wsadmin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    addFreightAPI,\n    getFrieghtListAPI,\n    putFreightAPI\n} from '@/api/prodFreightAPI.js'\nexport default {\n   name:'editor',\n  data () {\n    return {\n      // 运费模板\n      freightId:'0',\n      checked:false,\n      tableData:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:0,\n        type: 1,\n        renewPrice:'',\n      }],\n      tableDatatwo:[{\n        firstNumber:'',\n        firstPrice:'',\n        renewNumber:'',\n        isLarge:'',\n        type: 1,\n        renewPrice:'',\n      }],\n      checkList:[],\n      shopup:'',\n      dataForm:{\n        text:'',\n        title:'',\n        valuationWay:'1',\n        transportWay:''\n        // domains: [],\n      },\n      imageShowUrl:''\n      // resourcesUrl: window.SITE_CONFIG.resourcesUrl\n    }\n  },\n  components: {\n\n  },\n  props: {\n    prodgroupId: {\n      required: true,\n    },\n  },\n  computed: {\n  },\n  methods: {\n    /*\n      * 获取添加运费模板\n      */\n    pushGroupFormData () {\n        this.$refs['dataForm'].validate((valid) => {\n          if(valid){\n            let pushdata={\n              title:this.dataForm.title,\n              transportWay:this.dataForm.transportWay,\n              valuationWay:Number(this.dataForm.valuationWay),\n              defaultBuyins: 0,\n              defaultRetail: 0,\n              defaultStock: 0,\n              defaultTake: 0,\n              freightRegionList:[]\n            }\n            for(let i=0;i<this.checkList.length;i++){\n              if(this.checkList[i]==\"采购订单\"){\n                pushdata.defaultStock=1\n              }else if(this.checkList[i]==\"内购订单\"){\n                pushdata.defaultBuyins=1\n              }else if(this.checkList[i]==\"提货订单\"){\n                pushdata.defaultTake=1  \n              }else{\n                pushdata.defaultRetail=1\n              }\n            }\n            pushdata.freightRegionList.push(this.tableData[0])\n            if(this.checked){\n              pushdata.freightRegionList.push(this.tableDatatwo[0])\n            }\n            if(this.freightId!=0){\n              pushdata.id=this.freightId\n              putFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '修改成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }else{\n              addFreightAPI(pushdata)\n                .then(res => {\n                    const response = res.data;\n                    this.$message({\n                      type: 'success',\n                      message: '添加成功',\n                    });\n                    this.$emit('close-form')\n                    this.$emit('finish-action')\n                })\n                .catch(err => {\n                  console.log(err)\n                    this.tableLoading = false;\n                })\n            }\n          }\n        })\n    },\n    getFreightDetail(id){\n      getFrieghtListAPI(id)\n         .then(res => {\n            const response = res.data.data;\n            this.dataForm.title=response.title\n            this.dataForm.transportWay=response.transportWay\n            this.dataForm.valuationWay=''+response.valuationWay\n            if(response.defaultStock==1){\n              this.checkList.push('采购订单')\n            }\n            if(response.defaultBuyins==1){\n              this.checkList.push('内购订单')\n            }\n            if(response.defaultTake==1){\n              this.checkList.push('提货订单')\n            }\n            if(response.defaultRetail==1){\n              this.checkList.push('零售订单')\n            }\n            if(response.freightRegionList.length>1){\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n              this.tableDatatwo=[]\n              this.tableDatatwo.push(response.freightRegionList[1])\n            }else{\n              this.tableData=[]\n              this.tableData.push(response.freightRegionList[0])\n            }\n          })\n          .catch(err => {\n            console.log(err)\n            this.tableLoading = false;\n          })\n    },\n    errorMsg (message) {\n      this.$message({\n        message: message,\n        type: 'error',\n        duration: 1500\n      })\n    },\n    /*\n      * 返回上层\n      */\n    backhtmls(){\n        this.$emit('close-form')\n    }    \n  },\n  mounted() {\n    if(this.prodgroupId!=0){\n      this.getFreightDetail(this.prodgroupId)\n      this.freightId=this.prodgroupId\n    }\n    console.log(this.prodgroupId)\n  },\n}\n",null]}